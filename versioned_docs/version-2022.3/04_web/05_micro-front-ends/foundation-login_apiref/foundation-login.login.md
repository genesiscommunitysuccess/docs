<<<<<<< Updated upstream
<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@genesislcap/foundation-login](./foundation-login.md) &gt; [Login](./foundation-login.login.md)

## Login class

Defines the login class which handles account authentication from the front-end

<b>Signature:</b>

```typescript
export declare class Login extends FASTElement 
```
<b>Extends:</b> FASTElement

## Remarks

Add the Login class as a router element and it will handle the account authentication for you. Requires use of `@genesislcap/foundation-comms` for the  and  classes.

There are a lot of configuration options available, and different authentication types (such as login via SSO).

## Example

The following is an example of using it in your app, setting it up in the router configuration. This isn't a complete routes confutation, but it contains all required configuration with regards to the Login functionality.

```javascript
// Import required dependencies from the foundation-login package
import { Login, Settings as LoginSettings } from '@genesislcap/foundation-login';
// Import required dependencies from the foundation-comms package
// You could also import analytics events and set them up in the NavigationContributor
import { Auth, Session, } from '@genesislcap/foundation-comms';

// Define your router config with the login settings as the type
export class MainRouterConfig extends RouterConfiguration<LoginSettings> {
  // Ensure you inject in required dependencies
  constructor(
    @Auth private auth: Auth,
    @Session private session: Session
  ) {
    super();
  }

  // Add the Login class onto the /login route
  public configure() {
    ...
    this.routes.map(
      { path: '', redirect: 'login' },
      {
        path: 'login',
        element: Login,
        title: 'Login',
        name: 'login',
        layout: loginLayout,
        // Add settings here [1]
        settings: {
          defaultRedirectUrl: 'protected',
          public: true,
          resetPassword: true,
          forgotPassword: true,
          requestAccount: true,
          ssoToggle: true,
          ssoEnable: false,
        },
        childRouters: true,
      },
      ... // Other routes config here
    );

    const session = this.session;
    const auth = this.auth;

    // Example of a FallbackRouteDefinition
    this.routes.fallback(() =>
      auth.isLoggedIn ? { redirect: 'not-found' } : { redirect: 'login' }
    );

     // Example of a NavigationContributor
    this.contributors.push({
      navigate: async (phase) => {
        const settings = phase.route.settings;

        // Could add in processes such as analytics here

        // If public route don't block
        if (settings && settings.public) {
          return;
        }

        // If logged in don't block
        if (auth.isLoggedIn) {
          return;
        }

        // If allowAutoAuth and session is valid try to connect+auto-login [2]
        if (settings && settings.allowAutoAuth && (await auth.reAuthFromSession())) {
          return;
        }

        // Otherwise route them to login
        phase.cancel(() => {
          session.captureReturnUrl();
          Route.name.replace(phase.router, 'login');
        });
      },
    });
  }

  ... // Other configuration/methods

}
```
\[1\],\[2\] [Settings](./foundation-login.settings.md)

=======
<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@genesislcap/foundation-login](./foundation-login.md) &gt; [Login](./foundation-login.login.md)

## Login class

Defines the login class which handles account authentication from the front-end

<b>Signature:</b>

```typescript
export declare class Login extends FASTElement 
```
<b>Extends:</b> FASTElement

## Remarks

Add the Login class as a router element and it will handle the account authentication for you. Requires use of `@genesislcap/foundation-comms` for the  and  classes.

There are a lot of configuration options available, and different authentication types (such as login via SSO).

## Example

The following is an example of using it in your app, setting it up in the router configuration. This isn't a complete routes confutation, but it contains all required configuration with regards to the Login functionality.

```javascript
// Import required dependencies from the foundation-login package
import { Login, Settings as LoginSettings } from '@genesislcap/foundation-login';
// Import required dependencies from the foundation-comms package
// You could also import analytics events and set them up in the NavigationContributor
import { Auth, Session, } from '@genesislcap/foundation-comms';

// Define your router config with the login settings as the type
export class MainRouterConfig extends RouterConfiguration<LoginSettings> {
  // Ensure you inject in required dependencies
  constructor(
    @Auth private auth: Auth,
    @Session private session: Session
  ) {
    super();
  }

  // Add the Login class onto the /login route
  public configure() {
    ...
    this.routes.map(
      { path: '', redirect: 'login' },
      {
        path: 'login',
        element: Login,
        title: 'Login',
        name: 'login',
        layout: loginLayout,
        // Add settings here [1]
        settings: {
          defaultRedirectUrl: 'protected',
          public: true,
          resetPassword: true,
          forgotPassword: true,
          requestAccount: true,
          ssoToggle: true,
          ssoEnable: false,
        },
        childRouters: true,
      },
      ... // Other routes config here
    );

    const session = this.session;
    const auth = this.auth;

    // Example of a FallbackRouteDefinition
    this.routes.fallback(() =>
      auth.isLoggedIn ? { redirect: 'not-found' } : { redirect: 'login' }
    );

     // Example of a NavigationContributor
    this.contributors.push({
      navigate: async (phase) => {
        const settings = phase.route.settings;

        // Could add in processes such as analytics here

        // If public route don't block
        if (settings && settings.public) {
          return;
        }

        // If logged in don't block
        if (auth.isLoggedIn) {
          return;
        }

        // If allowAutoAuth and session is valid try to connect+auto-login [2]
        if (settings && settings.allowAutoAuth && (await auth.reAuthFromSession())) {
          return;
        }

        // Otherwise route them to login
        phase.cancel(() => {
          session.captureReturnUrl();
          Route.name.replace(phase.router, 'login');
        });
      },
    });
  }

  ... // Other configuration/methods

}
```
\[1\],\[2\] [Settings](./foundation-login.settings.md)

>>>>>>> Stashed changes
