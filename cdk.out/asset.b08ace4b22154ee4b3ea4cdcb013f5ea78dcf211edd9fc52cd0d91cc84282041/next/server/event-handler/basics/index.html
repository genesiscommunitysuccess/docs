<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-server/event-handler/basics">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Event Handler - Basics | Low-code Platform For Financial Markets</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://genesis.global//next/server/event-handler/basics/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Event Handler - Basics | Low-code Platform For Financial Markets"><meta data-rh="true" name="description" content="Let&#x27;s make things really simple."><meta data-rh="true" property="og:description" content="Let&#x27;s make things really simple."><meta data-rh="true" name="keywords" content="server,event handler,basics"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://genesis.global//next/server/event-handler/basics/"><link data-rh="true" rel="alternate" href="https://genesis.global//next/server/event-handler/basics/" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://genesis.global//next/server/event-handler/basics/" hreflang="x-default"><!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5GTR43J",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->



<script src="/js/docs.iife.min.js" async></script><link rel="stylesheet" href="/assets/css/styles.b91eddbd.css">
<link rel="preload" href="/assets/js/runtime~main.1e787288.js" as="script">
<link rel="preload" href="/assets/js/main.d2eb593c.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/getting-started/"><div class="navbar__logo"><img src="/img/logo-icon--light.svg" alt="Genesis Documentation" class="themedImage_ToTc themedImage--light_HNdA" height="25" width="25"><img src="/img/logo-icon--light.svg" alt="Genesis Documentation" class="themedImage_ToTc themedImage--dark_i4oU" height="25" width="25"></div><b class="navbar__title text--truncate">DOCUMENTATION</b></a><a class="navbar__item navbar__link" href="/getting-started/">Learning</a><a class="navbar__item navbar__link" href="/database/">Database</a><a class="navbar__item navbar__link" href="/server/">Server</a><a class="navbar__item navbar__link" href="/web/">Web</a><a class="navbar__item navbar__link" href="/operations/">Operations</a><a class="navbar__item navbar__link" href="/fuse/">Early access</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link so-icon" aria-label="StackOverflow" href="/resource/stackoverflow-onboarding/"></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/next/server/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/next/server/configuring-runtime/introduction/">CONFIGURING RUNTIME</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/system-definitions/">System Definitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/processes/">Processes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/service-definitions/">Service Definitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/genesis-router/">Genesis Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/cache/">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/configuring-runtime/setting-the-database-technology/">Setting the database technology</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/data-server/introduction/">DATA SERVER</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/request-server/introduction/">REQUEST SERVER</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/next/server/event-handler/introduction/">EVENT HANDLER</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/next/server/event-handler/basics/">Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/advanced/">Advanced</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/examples/">Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/configuring-runtime/">Configuring runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/testing/">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/java-event-handlers/">Java Event Handlers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/server/event-handler/testing-java-event-handlers/">Testing Java Event Handlers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/access-control/introduction/">ACCESS CONTROL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/state-machine/introduction/">STATE MACHINE</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/consolidator/introduction/">CONSOLIDATOR</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/evaluator/introduction/">EVALUATOR</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/inter-process-messages/introduction/">INTER-PROCESS MESSAGES</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/integration/rest-endpoints/introduction/">INTEGRATION</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/server/tooling/code-snippets/">TOOLING</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Low-code Platform For Financial Markets<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/server/event-handler/basics/">latest version</a></b> (<!-- -->2022.3<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Event Handler - Basics</h1></header><p>Let&#x27;s make things really simple.</p><ul><li>The Event Handler is the component that enables the application to write to the database.</li><li>You define your application&#x27;s Event Handler in a Kotlin script file (<strong>.kts</strong>).</li><li>In this file, you define specific <code>eventHandler</code> codeblocks, each of which has full access to the database.</li><li>Each <code>eventHandler</code> can be invoked from the front end, from other <code>eventHandler</code> codeblocks, or from custom components in the application.</li><li>If you use AppGen to build from your dictionary, then a basic <strong>.kts</strong> file will be built automatically for you, creating basic insert, modify and delete <code>eventHandler</code> code blocks for all the tables and views in your data model. You can edit this file to customise the component.</li><li>Otherwise, you can build your <strong>.kts</strong> by defining each <code>eventHandler</code> codeblock from scratch.</li><li>For complex Event Handlers, you might prefer to use the <a href="/database/api-reference/event-handler-api/">Event Handler API</a> to implement a set of classes.</li></ul><p>On this page, we&#x27;ll take you through the basics of creating an Event Handler in simple stages:</p><ul><li><a href="#a-simple-example-of-an-event-handler">a very simple example file</a></li><li><a href="#adding-a-name">giving each <code>eventHandler</code> codeblock a name</a></li><li><a href="#adding-validation">adding validation</a></li><li><a href="#returning-a-value">returning a value</a></li><li><a href="#transactional-event-handlers-acid">transactional <code>eventHandler</code> codeblocks</a></li><li><a href="#processing-onvalidate-and-oncommit">the process flow for <code>eventHandler</code> codeblocks</a></li><li><a href="#more-information-about-onvalidate">more information on validation</a></li><li><a href="#context-event-handlers">context Event Handlers</a></li></ul><p>By the end of that, you&#x27;ll have some very useful knowledge, and you&#x27;ll be ready to move on to the <a href="/server/event-handler/advanced/">advanced</a> page.</p><p>It is possible to define an Event Handler in Java, and we have included Java <a href="/server/event-handler/java-event-handlers/">examples</a>. However, we strongly advise you to create your Event Handler using Kotlin; it is a considerably more efficient method.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-simple-example-of-an-event-handler">A simple example of an Event Handler<a class="hash-link" href="#a-simple-example-of-an-event-handler" title="Direct link to heading">​</a></h2><p>Here is a simple example of an Event Handler file. It defines a single <code>eventHandler</code>, which inserts a counterparty into the database, using the <a href="/database/database-interface/entity-db/">entityDb</a>.</p><ul><li>First, note that there is an <code>eventHandler</code> statement for containing all your <code>eventHandler</code>codeblocks. This is necessary whether the file contains one <code>eventHandler</code>, or hundreds.</li><li>The single <code>eventHandler</code> is of type <code>&lt;Counterparty&gt;</code>, which has been created in advance for the COUNTERPARTY table. It defines a single <code>eventHandler</code> of type <code>&lt;Counterparty&gt;</code>.</li><li>The <code>eventHandler</code> inserts a counterparty into the database, using the <a href="/database/database-interface/entity-db/">entityDb</a>.</li></ul><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    eventHandler </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Counterparty</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-name">Adding a name<a class="hash-link" href="#adding-a-name" title="Direct link to heading">​</a></h2><p>Every <code>eventHandler</code> in your <strong>.kts</strong> must have a unique name. If you do not provide one, it will be allocated automatically. In the previous example, the <code>eventHandler</code> will automatically be named EVENT_COUNTERPARTY.</p><p>It is good practice to provide your own name for each <code>eventHandler</code>. For example, if you have insert and modify codeblocks for the same table and you don&#x27;t name them, then the platform will probably generate identical names for both - which will give you a problem.
Note that the prefix <code>EVENT_</code> is automatically added to the name that you specify.</p><p>If you do not define a name, a default name will be allocated automatically. The default name will be <code>EVENT_&lt;message type name&gt;</code>. So, for a message type declared as <code>OrderInsert</code>, declaring an Event Handler block as <code>eventHandler&lt;OrderInsert&gt;{}</code> automatically registers the event with the name <code>EVENT_ORDER_INSERT</code>.</p><p>So, below, we modify our previous example by defining the name of the <code>eventHandler</code>: COUNTERPARTY_INSERT. This will automatically become EVENT_COUNTERPARTY_INSERT.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Counterparty</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;COUNTERPARTY_INSERT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-validation">Adding validation<a class="hash-link" href="#adding-validation" title="Direct link to heading">​</a></h2><p>So far, we have provided an <code>onCommit</code>block in our <code>eventHandler</code>. This is where the active instructions are; these are usually database changes.</p><p>If you want to provide some validation before the action, you need to have an <code>onValidate</code> block before the <code>onCommit</code>. The last value of the code block must always be the return message type.</p><p>In this case, we have used the kotlin <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/require.html" target="_blank" rel="noopener noreferrer">require</a> function to check that the <code>counterparty</code> field is not empty.</p><p>The <code>onCommit</code> block will only be executed if the <code>counterparty</code> field is not null.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Counterparty</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;COUNTERPARTY_INSERT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onValidate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;Counterparty should have a name&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="returning-a-value">Returning a value<a class="hash-link" href="#returning-a-value" title="Direct link to heading">​</a></h2><p>The <code>onCommit</code> block must always return either an <code>ack()</code> or <code>nack(...)</code>. In the previous examples, it has always been an <code>ack()</code>.</p><p>Now consider a scenario where you might want to return a <code>nack(...)</code>. In this case, there is no <code>onValidate</code> block.</p><p>In the <code>onCommit</code> block:</p><ul><li>if the counterparty field is empty, the <code>eventHandler</code> returns a <code>nack</code>, along with a suitable message.</li><li>if the counterparty field has content, then the <code>eventHandler</code> returns an <code>ack</code></li></ul><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Counterparty</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;COUNTERPARTY_INSERT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">nack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;Counterparty should have a name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-reply-types">Default reply types<a class="hash-link" href="#default-reply-types" title="Direct link to heading">​</a></h3><p>So far, we have seen <code>ack</code> and <code>nack</code>. There is a third type: <code>warningNack</code>. Let&#x27;s stop and look at the specifications for all three default reply types:</p><ul><li><code>ack</code>: used to signify a successful result. <code>ack</code> takes an optional parameter of <code>List&lt;Map&lt;String, Any&gt;&gt;</code>. For example, <code>ack(listOf(mapOf(&quot;TRADE_ID&quot;, &quot;1&quot;)))</code>.</li><li><code>nack</code>: used to signify an unsuccessful result. <code>nack</code> accepts either a <code>String</code> parameter or a <code>Throwable</code>. For example, <code>nack(&quot;Error!&quot;)</code> or <code>nack(myThrowable)</code>.</li><li><code>warningNack</code>: used to warn the client. <code>warningNack</code>, like <code>nack</code>, accepts either a <code>String</code> parameter or a <code>Throwable</code>. For example, <code>warningNack(&quot;Provided User alias $userAlias will override Username $username.&quot;)</code> or <code>warningNack(myThrowable)</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transactional-event-handlers-acid">Transactional Event Handlers (ACID)<a class="hash-link" href="#transactional-event-handlers-acid" title="Direct link to heading">​</a></h2><p>If you want your  <code>eventHandler</code> to comply with <a href="/getting-started/glossary/glossary/#acid">ACID</a>, you can declare it to be  <code>transactional = true</code>. Any exception returned will result in a complete rollback of all parts of the <code>onCommit</code> and <code>onValidate</code> (the transaction also covers read commands) blocks. While an exception will trigger a rollback, the transaction will commit if a <code>nack</code> or <code>ack</code> is returned.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Counterparty</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">transactional </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> counterparty </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">counterparty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> Whether it is a database update or uploading a report to a third party. It will be called when an event message is received with <code>validate = false</code> and has successfully passed the <code>onValidate</code> block. The last value of the code block must always be the return message type.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="processing-onvalidate-and-oncommit">Processing onValidate and onCommit<a class="hash-link" href="#processing-onvalidate-and-oncommit" title="Direct link to heading">​</a></h2><p>The incoming message that triggers an Event Handler can have <code>validate</code> set to <code>true</code> or <code>false</code>. This controls whether the Event Handler simply performs some validation or it executes its complete set of processing. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate--true">validate = true<a class="hash-link" href="#validate--true" title="Direct link to heading">​</a></h3><p>The key thing about this setting is that it means that only the <code>onValidate</code> block is executed, not the <code>onCommit</code> block. Here is the precise process flow:</p><p><img loading="lazy" src="data:image/png;base64,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" width="235" height="312" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate--false">validate = false<a class="hash-link" href="#validate--false" title="Direct link to heading">​</a></h3><p>With this setting, both the <code>onValidate</code> codeblock and the <code>onCommit</code> codeblock will be executed. Here is the precise process flow:</p><p><img loading="lazy" src="/assets/images/eh-validate-false-c4d70289bdfae8232f15994a33ccce3c.png" width="281" height="362" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information-about-onvalidate">More information about onValidate<a class="hash-link" href="#more-information-about-onvalidate" title="Direct link to heading">​</a></h2><p>As you will have seen above, an <code>onValidate</code> codeblock will be executed whether the incoming message has <code>validate=true</code> or <code>validate=false</code>.The <code>onValidate</code> block is optional if you are using the default reply message type (<code>EventReply</code>) and will automatically be successful if not defined.</p><p>However, note that an <code>onValidate</code> codeblock is mandatory when using custom reply message types; the script will not compile if there is no <code>onValidate</code> codeblock. See the simple example below:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    eventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Company</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;COMPANY_INSERT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onValidate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> company </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">companyName </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;MY_COMPANY&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;We don&#x27;t accept your company&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> company </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">listOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">mapOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;COMPANY_ID&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">record</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">companyId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Kotlin’s <code>require</code> method throws an exception with a message if the boolean expression is not what is expected, and the Event Handler automatically converts that exception into a corresponding <code>EventNack</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="context-event-handlers">Context Event Handlers<a class="hash-link" href="#context-event-handlers" title="Direct link to heading">​</a></h3><p>In order to optimise database look-up operations, you might want to use data obtained by the <code>onValidate</code> block inside your <code>onCommit</code> block. To do this,
use context Event Handlers, as shown below:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    contextEventHandler</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> String</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;CONTEXT_COMPANY_INSERT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onValidate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> company </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">companyName </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;MY_COMPANY&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">validationAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">validationContext </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;Best company in the world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">validationAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        onCommit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> parsedContext </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(137, 221, 255)">?:</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;Missing context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> company </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">val</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> entityDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">ack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">listOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">mapOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;VALUE&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> parsedContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As the  example shows, there is an additional type defined for the context Event Handler. This is a <code>String</code>. It gives you the option of returning a <code>String</code> value from the <code>onValidate</code> block (see <em>validationAck</em> logic), which can then be captured it in the <code>onCommit</code> block (see <em>context</em> lambda parameter).</p><p>Because the example creates a validation context, the function <code>validationAck()</code> is used at the end of the <code>onValidate</code> block, and not just <code>ack()</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/next/tags/server/">server</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/next/tags/event-handler/">event handler</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/next/tags/basics/">basics</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/next/server/event-handler/introduction/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/next/server/event-handler/advanced/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-simple-example-of-an-event-handler" class="table-of-contents__link toc-highlight">A simple example of an Event Handler</a></li><li><a href="#adding-a-name" class="table-of-contents__link toc-highlight">Adding a name</a></li><li><a href="#adding-validation" class="table-of-contents__link toc-highlight">Adding validation</a></li><li><a href="#returning-a-value" class="table-of-contents__link toc-highlight">Returning a value</a><ul><li><a href="#default-reply-types" class="table-of-contents__link toc-highlight">Default reply types</a></li></ul></li><li><a href="#transactional-event-handlers-acid" class="table-of-contents__link toc-highlight">Transactional Event Handlers (ACID)</a></li><li><a href="#processing-onvalidate-and-oncommit" class="table-of-contents__link toc-highlight">Processing onValidate and onCommit</a><ul><li><a href="#validate--true" class="table-of-contents__link toc-highlight">validate = true</a></li><li><a href="#validate--false" class="table-of-contents__link toc-highlight">validate = false</a></li></ul></li><li><a href="#more-information-about-onvalidate" class="table-of-contents__link toc-highlight">More information about onValidate</a><ul><li><a href="#context-event-handlers" class="table-of-contents__link toc-highlight">Context Event Handlers</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© genesis global 2022. All rights reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1e787288.js"></script>
<script src="/assets/js/main.d2eb593c.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5GTR43J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>