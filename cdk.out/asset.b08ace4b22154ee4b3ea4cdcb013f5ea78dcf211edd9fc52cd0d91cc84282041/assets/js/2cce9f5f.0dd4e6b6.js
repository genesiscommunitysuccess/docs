"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[4889],{54536:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return i},metadata:function(){return m},toc:function(){return d}});var a=n(87462),o=n(63366),l=(n(67294),n(3905)),r=(n(61839),["components"]),i={title:"Web Deployment - Manual",sidebar_label:"Manual deployment",id:"manual-deployment",keywords:["web","manual deployment","deployment","introduction"],tags:["web","deployment","manual deployment","introduction"]},p=void 0,m={unversionedId:"web/deploying/manual-deployment",id:"web/deploying/manual-deployment",title:"Web Deployment - Manual",description:"To perform a manual deployment, you will have to:",source:"@site/docs/04_web/07_deploying/02_manual-deployment.md",sourceDirName:"04_web/07_deploying",slug:"/web/deploying/manual-deployment",permalink:"/next/web/deploying/manual-deployment",draft:!1,tags:[{label:"web",permalink:"/next/tags/web"},{label:"deployment",permalink:"/next/tags/deployment"},{label:"manual deployment",permalink:"/next/tags/manual-deployment"},{label:"introduction",permalink:"/next/tags/introduction"}],version:"current",sidebarPosition:2,frontMatter:{title:"Web Deployment - Manual",sidebar_label:"Manual deployment",id:"manual-deployment",keywords:["web","manual deployment","deployment","introduction"],tags:["web","deployment","manual deployment","introduction"]},sidebar:"frontendSidebar",previous:{title:"Introduction",permalink:"/next/web/deploying/introduction"},next:{title:"Automated Deployment",permalink:"/next/web/deploying/automated-deployment"}},u={},d=[],s={toc:d};function c(e){var t=e.components,n=(0,o.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"To perform a manual deployment, you will have to:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Copy the web build from your machine to the target server."),(0,l.kt)("li",{parentName:"ul"},"Update the ",(0,l.kt)("em",{parentName:"li"},"web root")," symlink.")),(0,l.kt)("p",null,"The files need to be placed in ",(0,l.kt)("inlineCode",{parentName:"p"},"/data/${productUser}/web"),". There are multiple ways to do this; use whichever one you are most comfortable with."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"It is possible to configure ",(0,l.kt)("a",{parentName:"p",href:"https://winscp.net/eng/index.php"},"WinSCP")," to sudo and deploy to the web root directly.")),(0,l.kt)("p",null,"If you ssh into the server using your personal credentials, you probably won't have access to put them there directly. To get around this, you can transfer them to ",(0,l.kt)("inlineCode",{parentName:"p"},"/tmp")," first (or any other directory with open permissions) and then copy them over to the desired location once you have logged in as the ",(0,l.kt)("em",{parentName:"p"},"product user")," on the server."),(0,l.kt)("p",null,"Here is an example using ",(0,l.kt)("a",{parentName:"p",href:"https://explainshell.com/explain?cmd=rsync+-avzhP+-e+%22ssh+i+%2Fpath%2Fto%2Fkey%22+src+target"},"rsync")," over SSH:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Send the files from your machine to the remote server, at first targeting the ",(0,l.kt)("inlineCode",{parentName:"li"},"/tmp")," for permissions reasons.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'rsync   -avzhP \n        -e "ssh -i /path/to/id_rsa"             # path to your ssh key\n        /path/to/local/build                    # path to your local build, generated by running npm run build \n        username@remote-target:/tmp/product     # initial target folder on the server\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"SSH into the server:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ssh -i /path/to/id_rsa username@remote-target")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Switch to the product user: "),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"sudo su - product")," "))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Copy the dist files from ",(0,l.kt)("inlineCode",{parentName:"p"},"/tmp")," to the ",(0,l.kt)("em",{parentName:"p"},"web root"),", by convention to a folder named web-${currentdate}: "),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cp -r /tmp/product/www /data/product/web-20220823")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Update the symlink:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"unlink /data/product/web")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ln -s /data/product/web-20220823/ /data/product/web "))))))}c.isMDXComponent=!0}}]);