"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[95019],{12296:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return u}});var a=n(87462),s=n(63366),o=(n(67294),n(3905)),r=(n(61839),["components"]),i={title:"Prerequisites - Installing WSL",sidebar_label:"Installing WSL",id:"installing-wsl",keywords:["getting started","quick start","prerequisites","wsl"],tags:["getting started","quick start","prerequisites","wsl"]},l=void 0,d={unversionedId:"getting-started/prerequisites/installing-wsl",id:"version-2022.3/getting-started/prerequisites/installing-wsl",title:"Prerequisites - Installing WSL",description:"If you don't have a Linux box for running your Genesis platform, you can use Windows Subsystem for Linux (WSL2) to install a Linux environment on your Windows machine.",source:"@site/versioned_docs/version-2022.3/01_getting-started/04_prerequisites/02_installing-wsl.md",sourceDirName:"01_getting-started/04_prerequisites",slug:"/getting-started/prerequisites/installing-wsl",permalink:"/getting-started/prerequisites/installing-wsl",draft:!1,tags:[{label:"getting started",permalink:"/tags/getting-started"},{label:"quick start",permalink:"/tags/quick-start"},{label:"prerequisites",permalink:"/tags/prerequisites"},{label:"wsl",permalink:"/tags/wsl"}],version:"2022.3",sidebarPosition:2,frontMatter:{title:"Prerequisites - Installing WSL",sidebar_label:"Installing WSL",id:"installing-wsl",keywords:["getting started","quick start","prerequisites","wsl"],tags:["getting started","quick start","prerequisites","wsl"]},sidebar:"learningSidebar",previous:{title:"Introduction",permalink:"/getting-started/prerequisites/introduction"},next:{title:"Gradle deploy plugin",permalink:"/getting-started/prerequisites/gradle-deploy-plugin"}},p={},u=[{value:"Setting up",id:"setting-up",level:2},{value:"Install Windows Terminal",id:"install-windows-terminal",level:3},{value:"Install WSL2",id:"install-wsl2",level:3},{value:"Install Ubuntu",id:"install-ubuntu",level:3},{value:"Install Docker Desktop for Windows",id:"install-docker-desktop-for-windows",level:3},{value:"Install CentOS7 for WSL2",id:"install-centos7-for-wsl2",level:3},{value:"Prepare CentOS for Genesis",id:"prepare-centos-for-genesis",level:3},{value:"Copying files between Windows and WSL",id:"copying-files-between-windows-and-wsl",level:3},{value:"Windows Firewall set-up",id:"windows-firewall-set-up",level:3},{value:"Setting up a Database",id:"setting-up-a-database",level:2},{value:"Installing FDB (recommended for development environments)",id:"installing-fdb-recommended-for-development-environments",level:3},{value:"Using H2 as an embedded database",id:"using-h2-as-an-embedded-database",level:3},{value:"Running Aerospike from Docker",id:"running-aerospike-from-docker",level:3},{value:"Running Postgres from Docker",id:"running-postgres-from-docker",level:3},{value:"Running MSSQL from Docker",id:"running-mssql-from-docker",level:3}],c={toc:u};function m(e){var t=e.components,i=(0,s.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"If you don't have a Linux box for running your Genesis platform, you can use Windows Subsystem for Linux (WSL2) to install a Linux environment on your Windows machine."),(0,o.kt)("p",null,"The Windows Subsystem for Linux enables you to run a GNU/Linux environment - including most command-line tools,\nutilities, and applications - directly on Windows, unmodified, without the overhead of a virtual machine or\ndual-boot setup."),(0,o.kt)("p",null,"In short, if your development environment is Windows, we recommend installing WSL2."),(0,o.kt)("p",null,"The recommended Linux OS is CentOS7. Here is how to set it up."),(0,o.kt)("h2",{id:"setting-up"},"Setting up"),(0,o.kt)("h3",{id:"install-windows-terminal"},"Install Windows Terminal"),(0,o.kt)("p",null,"If you haven\u2019t already, please install ",(0,o.kt)("a",{parentName:"p",href:"https://www.microsoft.com/store/productId/9N0DX20HK701"},"Windows Terminal"),". This provides a tabbed single Window from which you can open different command line tools."),(0,o.kt)("h3",{id:"install-wsl2"},"Install WSL2"),(0,o.kt)("p",null,"Your Windows install must be 2004+ (",(0,o.kt)("a",{parentName:"p",href:"https://support.microsoft.com/en-us/topic/windows-10-update-history-24ea91f4-36e7-d8fd-0ddb-d79d9d0cdbda"},"2020 May feature release or higher"),")."),(0,o.kt)("p",null,"If you have previously enabled WSL, you need to set the default version to 2 and (optionally) convert existing distros:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="PowerShell"',title:'"PowerShell"'},"> wsl -l -v\n  NAME      STATE           VERSION\n* Ubuntu    Stopped         1\n> wsl --set-default-version 2\nFor information on key differences with WSL 2 please visit https://aka.ms/wsl2\n> wsl --set-version Ubuntu 2\nConversion in progress, this may take a few minutes...\nFor information on key differences with WSL 2 please visit https://aka.ms/wsl2\nConversion complete.\n> wsl -l -v\n  NAME      STATE           VERSION\n* Ubuntu    Stopped         2\n")),(0,o.kt)("h3",{id:"install-ubuntu"},"Install Ubuntu"),(0,o.kt)("p",null,"Available in the Microsoft App store, the ",(0,o.kt)("a",{parentName:"p",href:"https://www.microsoft.com/store/productId/9PDXGNCFSCZV"},"Ubuntu app")," utilises\nWSL2 and enables you to open an Ubuntu terminal, which helps with Microsoft's guide on installing CentOS7 (in the section\nbelow)."),(0,o.kt)("h3",{id:"install-docker-desktop-for-windows"},"Install Docker Desktop for Windows"),(0,o.kt)("p",null,"Later on, you are going to need Docker in order to start your database. Also, depending on which route you choose, you might want Docker in order to Install CentOS7."),(0,o.kt)("p",null,"For instructions on how to install, see the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/docker-for-windows/"},"Docker documentation"),". For a\ndownload, ",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/editions/community/docker-ce-desktop-windows/"},"click here"),"."),(0,o.kt)("p",null,"Ensure that you have the WSL2 integration enabled and that you have enabled integration with your CentOS distribution. This enables you to access the Docker command, as well as any Docker container from any of the integrated distros, as well as from Windows."),(0,o.kt)("p",null,"To check this setting, open the Docker Desktop, then go to ",(0,o.kt)("strong",{parentName:"p"},"Settings")," > ",(0,o.kt)("strong",{parentName:"p"},"Resources")," > ",(0,o.kt)("strong",{parentName:"p"},"WSL\nIntegration"),"."),(0,o.kt)("h3",{id:"install-centos7-for-wsl2"},"Install CentOS7 for WSL2"),(0,o.kt)("p",null,"WSL distributions can be found easily at various locations on the web. For instance, here is a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/mishamosher/CentOS-WSL/releases/download/7.9-2111/CentOS7.zip"},"prebuilt WSL CentOS7\ndistro"),"."),(0,o.kt)("p",null,"To install this distro, unzip and execute the .exe"),(0,o.kt)("p",null,"For an alternative and expedient way to install CentOS7, you can use the Microsoft article below in order to build a CentOS distro from a Docker image."),(0,o.kt)("admonition",{title:"Important",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Note that you want to install CentOS7, whereas the microsoft article below focuses on CentOS latest."),(0,o.kt)("p",{parentName:"admonition"},"Replace\n",(0,o.kt)("inlineCode",{parentName:"p"},"# docker run -t centos bash ls/")),(0,o.kt)("p",{parentName:"admonition"},"with\n",(0,o.kt)("inlineCode",{parentName:"p"},"# docker run -t centos:centos7 bash ls/")," "),(0,o.kt)("p",{parentName:"admonition"},"for the third step under ",(0,o.kt)("strong",{parentName:"p"},"Export the tar from a container"),".")),(0,o.kt)("p",null,"You can find the Microsoft article to install CentOS ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/wsl/use-custom-distro"},"here"),"."),(0,o.kt)("p",null,"Once you have installed CentOS, close your Windows Terminal then reopen it. Note the new entry in the drop-down menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(98728).Z,width:"683",height:"321"})),(0,o.kt)("p",null,"Next, update CentOS by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"yum check-update\nyum update\n")),(0,o.kt)("h3",{id:"prepare-centos-for-genesis"},"Prepare CentOS for Genesis"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Install package group:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"yum groupinstall base\n\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Install Java 11 or scp jdk from local binaries folder and install:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"sudo yum install java-11-openjdk-devel\n")),(0,o.kt)("p",null,"Once you have set this up, it is a good idea to export the distribution:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="PowerShell"',title:'"PowerShell"'},"wsl --export CentOS7 centos.backup\n")),(0,o.kt)("p",null,"You can then ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/wsl/use-custom-distro#import-the-tar-file-into-wsl"},"import")," it again under a different name. This allows you to have multiple distributions for different projects, for example, or for running Intellij."),(0,o.kt)("h3",{id:"copying-files-between-windows-and-wsl"},"Copying files between Windows and WSL"),(0,o.kt)("p",null,"From WSL, your Windows drives are available from ",(0,o.kt)("inlineCode",{parentName:"p"},"/mnt/${driveLetter}"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"# pwd\n/mnt\n# ll\ntotal 0\ndrwxrwxrwx 1 root root  512 Aug  8 12:48 c\ndrwxrwxrwx 1 root root 4096 Aug 14 08:50 d\ndrwxrwxrwt 5 root root  100 Aug 14 10:16 wsl\n#\n")),(0,o.kt)("p",null,"To access your WSL distros from Windows, open Windows Explorer and search ",(0,o.kt)("strong",{parentName:"p"}," ","\\","\\wsl$\\ ")," for Windows 10 or ",(0,o.kt)("strong",{parentName:"p"}," ","\\","\\wsl.localhost\\ ")," for Windows 11."),(0,o.kt)("h3",{id:"windows-firewall-set-up"},"Windows Firewall set-up"),(0,o.kt)("p",null,"If you are using Windows Firewall, you need to allow smooth network communication between your WSL distros and Windows."),(0,o.kt)("p",null,"First, get the network range for your WSL network switch; run ",(0,o.kt)("inlineCode",{parentName:"p"},"ipconfig.exe")," as admin in PowerShell and look for WSL:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Ethernet adapter vEthernet (WSL):\n\n   Connection-specific DNS Suffix  . :\n   Link-local IPv6 Address . . . . . : fe80::6928:38ea:1eb7:84bc%43\n   IPv4 Address. . . . . . . . . . . : 172.28.224.1\n   Subnet Mask . . . . . . . . . . . : 255.255.240.0\n   Default Gateway . . . . . . . . . :\n")),(0,o.kt)("p",null,"Run the following command as admin so your firewall will not block inbound traffic from your WSL instances:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="PowerShell"',title:'"PowerShell"'},'New-NetFirewallRule -DisplayName "WSL" -Direction Inbound  -InterfaceAlias "vEthernet (WSL)"  -Action Allow\n')),(0,o.kt)("h2",{id:"setting-up-a-database"},"Setting up a Database"),(0,o.kt)("h3",{id:"installing-fdb-recommended-for-development-environments"},"Installing FDB (recommended for development environments)"),(0,o.kt)("p",null,"As root (note, replace ",(0,o.kt)("inlineCode",{parentName:"p"},"alpha")," with the application user set up):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"useradd alpha\nusermod -aG wheel alpha\n")),(0,o.kt)("p",null,"Then..."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},'rpm -Uvhi https://github.com/apple/foundationdb/releases/download/6.3.23/foundationdb-clients-6.3.23-1.el7.x86_64.rpm\nrpm -Uvhi https://github.com/apple/foundationdb/releases/download/6.3.23/foundationdb-server-6.3.23-1.el7.x86_64.rpm\nmv /usr/bin/systemctl /usr/bin/systemctl.old\ncurl https://raw.githubusercontent.com/gdraheim/docker-systemctl-replacement/master/files/docker/systemctl.py > /usr/bin/systemctl\nchmod +x /usr/bin/systemctl\nsystemctl start foundationdb\nfdbcli --exec "configure new single ssd ; status"\nsystemctl enable foundationdb\n\n')),(0,o.kt)("p",null,"Then, to check if it's running: "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"systemctl status foundationdb")),(0,o.kt)("h3",{id:"using-h2-as-an-embedded-database"},"Using H2 as an embedded database"),(0,o.kt)("admonition",{title:"only for learning purposes",type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"This set-up is not recommended for production environments or serious development.")),(0,o.kt)("p",null,"You can use an embedded H2 database for basic development. This solution creates an H2 file-based database in the same\nenvironment where your app is running. The database is initiated by JDBC and does not require additional set-up."),(0,o.kt)("p",null,"To use H2, use this JDBC URL, substituting your own path name:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"jdbc:h2:file:~/run/path/to/h2;AUTO_SERVER=TRUE\n")),(0,o.kt)("p",null,"In your system configuration, set ",(0,o.kt)("inlineCode",{parentName:"p"},"DbLayer=SQL"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DictionarySource=FILE")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"DbQuotedIdentifiers=true"),"."),(0,o.kt)("h3",{id:"running-aerospike-from-docker"},"Running Aerospike from Docker"),(0,o.kt)("p",null,"You can run Aerospike with the following Docker command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"docker run --name aerospike -tid -p 3000:3000 -p 3001:3001 -p 3002:3002 -p 3003:3003 aerospike/aerospike-server:3.15.1.4\n")),(0,o.kt)("p",null,"This creates a download and runs Aerospike in a Docker container."),(0,o.kt)("p",null,"To check if the container is running, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker container ls -a")," command. This will show the id and name of the Aerospike container. You need these to interact with the container."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},'# docker container ls -a\nCONTAINER ID        IMAGE                                 COMMAND                CREATED             STATUS                      PORTS               NAMES\nc3468768d9c9        aerospike/aerospike-server:3.15.1.4   "/entrypoint.sh asd"   2 minutes ago       Exited (0) 32 seconds ago                       priceless_bardeen\n')),(0,o.kt)("p",null,"To start or stop the container, use ",(0,o.kt)("inlineCode",{parentName:"p"},"docker start|stop ${containerName}"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},'# docker stop priceless_bardeen\npriceless_bardeen\n# docker container ls -a\nCONTAINER ID        IMAGE                                 COMMAND                CREATED             STATUS\n        PORTS               NAMES\nc3468768d9c9        aerospike/aerospike-server:3.15.1.4   "/entrypoint.sh asd"   5 minutes ago       Exited (0) 3 minutes ago                       priceless_bardeen\n# docker start priceless_bardeen\npriceless_bardeen\n# docker container ls -a\nCONTAINER ID        IMAGE                                 COMMAND                CREATED             STATUS\n PORTS                              NAMES\nc3468768d9c9        aerospike/aerospike-server:3.15.1.4   "/entrypoint.sh asd"   5 minutes ago       Up 4 seconds        0.0.0.0:3000-3003->3000-3003/tcp   priceless_bardeen\n')),(0,o.kt)("p",null,"To remove the container, use ",(0,o.kt)("inlineCode",{parentName:"p"},"docker rm ${containerName}"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"# docker rm priceless_bardeen\npriceless_bardeen\n# docker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS\nNAMES\n")),(0,o.kt)("p",null,"After removing, you can create a fresh container using the same command as above:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},'# docker run -tid -p 3000:3000 -p 3001:3001 -p 3002:3002 -p 3003:3003 aerospike/aerospike-server:3.15.1.4\n41e9aee4246ca1aaaa5d5fb4e832e0778ba541cf56ad37869c675bc96c1ceb3e\n# docker container ls -a\nCONTAINER ID        IMAGE                                 COMMAND                CREATED             STATUS\n PORTS                              NAMES\n41e9aee4246c        aerospike/aerospike-server:3.15.1.4   "/entrypoint.sh asd"   6 seconds ago       Up 5 seconds        0.0.0.0:3000-3003->3000-3003/tcp   sweet_sinoussi\n')),(0,o.kt)("p",null,"By default, the Aerospike Docker database only has the ",(0,o.kt)("strong",{parentName:"p"},"test")," namespace, so you need to change the namespace in the\nfile ",(0,o.kt)("strong",{parentName:"p"},"genesis-system-definition.kts"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'    ...\n    systems {\n        system(name = "DEV") {\n            ...\n            item(name = "DbNamespace", value = "test")\n            ...\n        }\n    }\n    ...\n')),(0,o.kt)("h3",{id:"running-postgres-from-docker"},"Running Postgres from Docker"),(0,o.kt)("p",null,"Running Postgres from Docker is very similar to running Aerospike:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"docker run -tid -p 5432:5432 -e POSTGRES_PASSWORD=docker -e PGDATA=/tmp postgres:12.6-alpine -c shared_buffers=80MB -c max_connections=250\n")),(0,o.kt)("p",null,"This downloads and runs a Postgres image for version 12.6. Other versions are available; for more\ndetails ",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/postgres/"},"see here"),". For version 10, change ",(0,o.kt)("inlineCode",{parentName:"p"},"12.6-alpine")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"10.16-alpine"),"."),(0,o.kt)("p",null,"To connect, use this JDBC URL:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"jdbc:postgresql://localhost:5432/?user=postgres&password=docker\n")),(0,o.kt)("h3",{id:"running-mssql-from-docker"},"Running MSSQL from Docker"),(0,o.kt)("p",null,"Run the following Docker command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},'docker run -e "ACCEPT_EULA=Y" -e "SA_PASSWORD=docker" -p 1433:1433 -d mcr.microsoft.com/mssql/server:2019-latest\n')),(0,o.kt)("p",null,"This downloads and runs an MSSQL image for version 2019-latest. Other versions are available; for more\ndetails ",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/microsoft-mssql-server"},"see here"),"."),(0,o.kt)("p",null,"To connect, use this JDBC URL:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"jdbc:sqlserver://localhost:1433;database=master;user=sa;password=docker\n")))}m.isMDXComponent=!0},98728:function(e,t,n){t.Z=n.p+"assets/images/wsl-menu-2693327e4b440dc0b0a0eb50bc7f368b.png"}}]);