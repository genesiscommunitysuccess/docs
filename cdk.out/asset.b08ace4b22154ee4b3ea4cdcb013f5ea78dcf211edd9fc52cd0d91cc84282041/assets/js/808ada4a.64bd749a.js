"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[46949],{7584:function(e,a,t){t.r(a),t.d(a,{assets:function(){return p},contentTitle:function(){return o},default:function(){return g},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return c}});var n=t(87462),r=t(63366),l=(t(67294),t(3905)),i=(t(61839),["components"]),s={title:"Web Basics - Inserting a grid",sidebar_label:"Inserting a grid",id:"inserting-a-grid",keywords:["web","basics","inserting a grid"],tags:["web","basics","inserting a grid"]},o=void 0,d={unversionedId:"web/basics/inserting-a-grid",id:"web/basics/inserting-a-grid",title:"Web Basics - Inserting a grid",description:"In this example, we shall add a grid to our new page. This grid will display data from a Data Server resource on the server. In this case, the resource is called ALL_TRADES. The logic would be the same for any other.",source:"@site/docs/04_web/01_basics/03_inserting-a-grid.md",sourceDirName:"04_web/01_basics",slug:"/web/basics/inserting-a-grid",permalink:"/next/web/basics/inserting-a-grid",draft:!1,tags:[{label:"web",permalink:"/next/tags/web"},{label:"basics",permalink:"/next/tags/basics"},{label:"inserting a grid",permalink:"/next/tags/inserting-a-grid"}],version:"current",sidebarPosition:3,frontMatter:{title:"Web Basics - Inserting a grid",sidebar_label:"Inserting a grid",id:"inserting-a-grid",keywords:["web","basics","inserting a grid"],tags:["web","basics","inserting a grid"]},sidebar:"frontendSidebar",previous:{title:"Creating a new page",permalink:"/next/web/basics/creating-a-new-page"},next:{title:"Package.json basics",permalink:"/next/web/basics/package-json-basics"}},p={},c=[{value:"The wrapper class",id:"the-wrapper-class",level:2},{value:"Adding the grid component",id:"adding-the-grid-component",level:2},{value:"Adding the data source",id:"adding-the-data-source",level:2},{value:"Configuring the datasource and customising the grid",id:"configuring-the-datasource-and-customising-the-grid",level:2},{value:"Custom column definitions",id:"custom-column-definitions",level:2},{value:"Going further",id:"going-further",level:2},{value:"Final result",id:"final-result",level:2}],u={toc:c};function g(e){var a=e.components,s=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,s,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"In this example, we shall add a grid to our new page. This grid will display data from a Data Server resource on the server. In this case, the resource is called ALL_TRADES. The logic would be the same for any other."),(0,l.kt)("p",null,"More specifically, we will be adding:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"a simple wrapper div for styling/sizing purposes"),(0,l.kt)("li",{parentName:"ul"},"a ",(0,l.kt)("inlineCode",{parentName:"li"},"zero-grid-pro")," grid component"),(0,l.kt)("li",{parentName:"ul"},"a ",(0,l.kt)("inlineCode",{parentName:"li"},"grid-pro-genesis-datasource")," component, which makes the actual connection to the server resource and provides data to the grid")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"For static data, the lightweight ",(0,l.kt)("a",{parentName:"p",href:"/web/web-components/grids/data-grid/"},"DataGrid")," is recommended instead. ")),(0,l.kt)("h2",{id:"the-wrapper-class"},"The wrapper class"),(0,l.kt)("p",null,"Keeping this one simple, just add a ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," with class ",(0,l.kt)("inlineCode",{parentName:"p"},"wrapper")," to our template:  ",(0,l.kt)("strong",{parentName:"p"},"src/routes/test-page/test-page.template.ts"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'  <div class="wrapper">\n    \x3c!-- The grid will go in here. --\x3e\n  </div>\n')),(0,l.kt)("p",null,"And to make it full size, add this code to the file ",(0,l.kt)("strong",{parentName:"p"},"src/routes/test-page/test-page.styles.ts"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-css"},"  .wrapper {\n    height: 100%;\n    width: 100%;\n  }\n")),(0,l.kt)("h2",{id:"adding-the-grid-component"},"Adding the grid component"),(0,l.kt)("p",null,"Now, we need to add the grid component inside the wrapper div. In this example, we have left a comment to show where the data source will be added:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'  <div class="wrapper">\n    <zero-grid-pro>\n      \x3c!-- The datasource will go in here. --\x3e\n    </zero-grid-pro>\n  </div>\n')),(0,l.kt)("h2",{id:"adding-the-data-source"},"Adding the data source"),(0,l.kt)("p",null,"Now we can see the same code snippet when the data source (ALL_TRADES) has been added:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'  <div class="wrapper">\n    <zero-grid-pro>\n      <grid-pro-genesis-datasource resourceName="ALL_TRADES" />\n    </zero-grid-pro>\n  </div>\n')),(0,l.kt)("p",null,"With these few lines of code, we already have a fully functional grid:\n",(0,l.kt)("img",{src:t(68402).Z,width:"2558",height:"1302"})),(0,l.kt)("h2",{id:"configuring-the-datasource-and-customising-the-grid"},"Configuring the datasource and customising the grid"),(0,l.kt)("p",null,"Let's say we want the incoming data from the server ordered by a specific column, and we also want a custom height for our rows.  "),(0,l.kt)("p",null,"We just need to set a few properties on our grid and datasource components. In this case, we add a ",(0,l.kt)("inlineCode",{parentName:"p"},"rowHeight")," to our grid and specify ",(0,l.kt)("inlineCode",{parentName:"p"},"orderBy")," in our connection to the resource:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'  <div class="wrapper">\n    <zero-grid-pro rowHeight="45">\n      <grid-pro-genesis-datasource resourceName="ALL_TRADES" orderBy="TRADE_DATETIME" />\n    </zero-grid-pro>\n  </div>\n')),(0,l.kt)("h2",{id:"custom-column-definitions"},"Custom column definitions"),(0,l.kt)("p",null,"Here are some more ways to customise the grid:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"show only a subset of the columns "),(0,l.kt)("li",{parentName:"ul"},"provide custom headers and value formatters"),(0,l.kt)("li",{parentName:"ul"},"enable flashing on updates")),(0,l.kt)("p",null,"We can achieve this by providing our own custom column definitions."),(0,l.kt)("p",null,"In this case, we have defined custom definitions for ten fields. For each of these, we have specified  a value for ",(0,l.kt)("inlineCode",{parentName:"p"},"headerName")," and we have set ",(0,l.kt)("inlineCode",{parentName:"p"},"enableCellChangeFlash: true"),"."),(0,l.kt)("p",null,"Then, in the export, we have added the line ",(0,l.kt)("inlineCode",{parentName:"p"},"${repeat(() => tradeColumnDefs, html")," `, which takes in all the definitions."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import {html, repeat} from '@microsoft/fast-element';\nimport {formatDateLong, formatNumber} from '../../utils/formatting';\nimport type {TestPage} from './test-page';\n\nexport const tradeColumnDefs = [\n  {field: 'INSTRUMENT_NAME', headerName: 'Instrument', enableCellChangeFlash: true, flex: 3},\n  {field: 'SIDE', headerName: 'Side', cellClass: 'status-cell', enableCellChangeFlash: true, flex: 1},\n  {field: 'QUANTITY', headerName: 'Quantity', valueFormatter: formatNumber(0), type: 'rightAligned', enableCellChangeFlash: true, flex: 1},\n  {field: 'CURRENCY', headerName: 'Ccy', enableCellChangeFlash: true, flex: 1},\n  {field: 'PRICE', headerName: 'Price', valueFormatter: formatNumber(2), type: 'rightAligned', enableCellChangeFlash: true, flex: 2},\n  {field: 'CONSIDERATION', headerName: 'Consideration', valueFormatter: formatNumber(2), type: 'rightAligned', enableCellChangeFlash: true, flex: 2},\n  {field: 'TRADE_DATETIME', headerName: 'Date', valueFormatter: rowData => formatDateLong(rowData.data.TRADE_DATETIME), sort: 'desc', enableCellChangeFlash: true, flex: 2},\n  {field: 'COUNTERPARTY_NAME', headerName: 'Counterparty', enableCellChangeFlash: true, flex: 2},\n  {field: 'TRADE_STATUS', headerName: 'Trade State', cellClass: 'status-cell', enableCellChangeFlash: true, flex: 2},\n  {field: 'ENTERED_BY', headerName: 'Entered By', enableCellChangeFlash: true, flex: 2},\n];\n\nexport const TestPageTemplate = html<TestPage>`\n  <div class=\"wrapper\">\n    <zero-grid-pro rowHeight=\"45\" only-template-col-defs enabledRowFlashing >\n      <grid-pro-genesis-datasource resourceName=\"ALL_TRADES\" orderBy=\"TRADE_DATETIME\" />\n      ${repeat(() => tradeColumnDefs, html`\n        <grid-pro-column :definition=\"${x => x}\" />\n      `)}\n    </zero-grid-pro>\n  </div>\n`;\n")),(0,l.kt)("p",null,"Here is the result:"),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(49916).Z,width:"1858",height:"475"})),(0,l.kt)("h2",{id:"going-further"},"Going further"),(0,l.kt)("p",null,"If you want to get more complex, you can create your own grid component; you do this in the same way that you created the ",(0,l.kt)("inlineCode",{parentName:"p"},"TestPage")," component. In the example below, the component is called ",(0,l.kt)("inlineCode",{parentName:"p"},"positions-grid-pro"),". "),(0,l.kt)("p",null,"Note we are extending the ",(0,l.kt)("inlineCode",{parentName:"p"},"ZeroGridPro"),", not the ",(0,l.kt)("inlineCode",{parentName:"p"},"fast-element"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import {ZeroGridPro, zeroGridProTemplate} from '@genesislcap/foundation-zero-grid-pro';\nimport {customElement} from '@microsoft/fast-element';\nimport {positionsGridStyles} from './grid-pro.styles';\n\n@customElement({\n  name: 'positions-grid-pro',\n  template: zeroGridProTemplate,\n  styles: positionsGridStyles,\n})\nexport class PositionsAgGrid extends ZeroGridPro {\n}\n")),(0,l.kt)("p",null,"Now you need to provide custom styles for the custom component:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"\nimport {css, ElementStyles} from '@microsoft/fast-element';\nimport {BUY_SIDE, SELL_SIDE, NEW_TRADE_STATUS, CANCELLED_TRADE_STATUS} from './colors';\n\nexport const positionsGridStyles: ElementStyles = css`\n  ${zeroAgGridStyles}\n\n  .status-cell {\n    display:flex;\n    align-items: center;\n    margin-left: 6px;\n  }\n  \n  .status-cell::after {\n    content: \"\";\n    position: absolute;\n    left: 6px;\n    height: 100%;\n    width: 3px;\n  }\n\n  .buy-side-trade.status-cell::after {\n    background-color: ${BUY_SIDE};\n  }\n\n  .buy-side-trade {\n    color: ${BUY_SIDE};\n  }\n\n  .sell-side-trade.status-cell::after {\n    background-color: ${SELL_SIDE};\n  }\n\n  .sell-side-trade {\n    color: ${SELL_SIDE};\n  }\n\n  .new-status-trade.status-cell::after {\n    background-color: ${NEW_TRADE_STATUS};\n  }\n\n  .new-status-trade {\n    color: ${NEW_TRADE_STATUS};\n  }\n\n  .cancel-status-trade.status-cell::after {\n    background-color: ${CANCELLED_TRADE_STATUS};\n  }\n\n  .cancel-status-trade {\n    color: ${CANCELLED_TRADE_STATUS};\n  }\n`;\n")),(0,l.kt)("p",null,"This allows us to enhance the column definitions by adding conditional classes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const tradeCellClassRules = {\n  'buy-side-trade': params => params.value === 'BUY',\n  'sell-side-trade': params => params.value === 'SELL',\n  'new-status-trade': params => params.value === 'NEW',\n  'cancel-status-trade': params => params.value === 'CANCELLED',\n};\n\nexport const tradeColumnDefs: ColDef[] = [\n  {field: 'INSTRUMENT_NAME', headerName: 'Instrument', enableCellChangeFlash: true, flex: 3},\n  {field: 'SIDE', headerName: 'Side', cellClass: 'status-cell', cellClassRules: tradeCellClassRules, enableCellChangeFlash: true, flex: 1},\n  {field: 'QUANTITY', headerName: 'Quantity', valueFormatter: formatNumber(0), type: 'rightAligned', enableCellChangeFlash: true, flex: 1},\n  {field: 'CURRENCY', headerName: 'Ccy', enableCellChangeFlash: true, flex: 1},\n  {field: 'PRICE', headerName: 'Price', valueFormatter: formatNumber(2), type: 'rightAligned', enableCellChangeFlash: true, flex: 2},\n  {field: 'CONSIDERATION', headerName: 'Consideration', valueFormatter: formatNumber(2), type: 'rightAligned', enableCellChangeFlash: true, flex: 2},\n  {field: 'TRADE_DATETIME', headerName: 'Date', valueFormatter: rowData => formatDateLong(rowData.data.TRADE_DATETIME), sort: 'desc', enableCellChangeFlash: true, flex: 2},\n  {field: 'COUNTERPARTY_NAME', headerName: 'Counterparty', enableCellChangeFlash: true, flex: 2},\n  {field: 'TRADE_STATUS', headerName: 'Trade State', cellClass: 'status-cell', cellClassRules: tradeCellClassRules, enableCellChangeFlash: true, flex: 2},\n  {field: 'ENTERED_BY', headerName: 'Entered By', enableCellChangeFlash: true, flex: 2},\n];\n")),(0,l.kt)("h2",{id:"final-result"},"Final result"),(0,l.kt)("p",null,"And so we have our result:"),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(13016).Z,width:"1856",height:"540"})),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"You can read more about our grid components and configuration options under the ",(0,l.kt)("a",{parentName:"p",href:"/web/web-components/grids/grid-pro/grid-pro-intro/"},"Web UI reference")," for grids.")))}g.isMDXComponent=!0},68402:function(e,a,t){a.Z=t.p+"assets/images/all-trades-grid-01-cb05459e3a3858766397886a450a0cff.png"},49916:function(e,a,t){a.Z=t.p+"assets/images/all-trades-grid-02-23dfa7cfb70f65c2cae19b74555d39e4.png"},13016:function(e,a,t){a.Z=t.p+"assets/images/all-trades-grid-03-371d160ba0af6e9a650d50c3adfdadc1.png"}}]);