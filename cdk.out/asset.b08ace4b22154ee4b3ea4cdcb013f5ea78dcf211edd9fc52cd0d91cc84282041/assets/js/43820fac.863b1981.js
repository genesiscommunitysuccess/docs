"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[5267],{34355:function(t,e,n){n.r(e),n.d(e,{assets:function(){return d},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return m},toc:function(){return N}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=(n(61839),["components"]),l={title:"Notify - Microsoft teams",sidebar_label:"Microsoft teams",id:"microsoft-teams",keywords:["server","integration","notify","microsoft teams"],tags:["server","integration","notify","microsoft teams"]},s=void 0,m={unversionedId:"server/integration/notify/microsoft-teams",id:"version-2022.3/server/integration/notify/microsoft-teams",title:"Notify - Microsoft teams",description:"Microsoft Teams provides a mechanism for exposing its channels to a remote system via webhooks. A webhook url can be created as described here",source:"@site/versioned_docs/version-2022.3/03_server/10_integration/06_notify/04_microsoft-teams.md",sourceDirName:"03_server/10_integration/06_notify",slug:"/server/integration/notify/microsoft-teams",permalink:"/server/integration/notify/microsoft-teams",draft:!1,tags:[{label:"server",permalink:"/tags/server"},{label:"integration",permalink:"/tags/integration"},{label:"notify",permalink:"/tags/notify"},{label:"microsoft teams",permalink:"/tags/microsoft-teams"}],version:"2022.3",sidebarPosition:4,frontMatter:{title:"Notify - Microsoft teams",sidebar_label:"Microsoft teams",id:"microsoft-teams",keywords:["server","integration","notify","microsoft teams"],tags:["server","integration","notify","microsoft teams"]},sidebar:"serverModulesSidebar",previous:{title:"Symphony",permalink:"/server/integration/notify/symphony"},next:{title:"Introduction",permalink:"/server/integration/custom-endpoints/introduction"}},d={},N=[{value:"System configuration",id:"system-configuration",level:2},{value:"Database configuration",id:"database-configuration",level:2},{value:"GATEWAY",id:"gateway",level:3},{value:"NOTIFY_ROUTE",id:"notify_route",level:3},{value:"NOTIFY",id:"notify",level:3}],p={toc:N};function u(t){var e=t.components,l=(0,r.Z)(t,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,l,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Microsoft Teams provides a mechanism for exposing its channels to a remote system via webhooks. A webhook url can be created as described ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook"},"here")),(0,o.kt)("p",null,'The most important thing to gather from the teams channel webhook setup is the "WebHook URL"'),(0,o.kt)("h2",{id:"system-configuration"},"System configuration"),(0,o.kt)("p",null,"No configuration is required for Teams integration; you simply need to know the WebHook URL which is used in database entries outlined in the section below"),(0,o.kt)("h2",{id:"database-configuration"},"Database configuration"),(0,o.kt)("h3",{id:"gateway"},"GATEWAY"),(0,o.kt)("p",null,"You'll need to set up a GATEWAY entry for each of the channels the app needs to send messages to."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Usage"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"GATEWAY_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"A unique identifier for this gateway, which will be referenced in the NOTIFY_ROUTE table when sending a message to the channel: for example, the Channel name could be used")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"GATEWAY_TYPE"),(0,o.kt)("td",{parentName:"tr",align:null},"should be set to ",(0,o.kt)("inlineCode",{parentName:"td"},"MsTeamsChannel"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"GATEWAY_VALUE"),(0,o.kt)("td",{parentName:"tr",align:null},"The teams WebHook Url from your channel (see ",(0,o.kt)("a",{parentName:"td",href:"https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook"},"here"),")")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"INCOMING_TOPIC"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A - Notify does not currently support inbound messages from the channel")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"CONNECTION_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")))),(0,o.kt)("p",null,"Here is an example GATEWAY entry:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"==================================\nGATEWAY\n==================================\nField Name                               Value                                    Type\n===========================================================================================\nTIMESTAMP                                2022-03-16 13:35:18.863(n:0,s:1964)      NANO_TIMESTAMP\nCONNECTION_ID                                                                     STRING\nGATEWAY_ID                               TestAlerts                               STRING\nGATEWAY_TYPE                             MsTeamsChannel                           ENUM[Log EmailUser EmailDistribution SymphonyByUserEmail SymphonyRoom MsTeamsChannel SymphonyRoomReqRep]\nGATEWAY_VALUE                            https://netorg209792.webhook.office.c... STRING\nINCOMING_TOPIC                                                                    STRING\n-------------------------------------------------------------------------------------------\n")),(0,o.kt)("h3",{id:"notify_route"},"NOTIFY_ROUTE"),(0,o.kt)("p",null,"You need at least one NOTIFY_ROUTE entry set up to point to the GATEWAY record, so that NOTIFY records are routed as messages."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Usage"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"ENTITY_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"ENTITY_ID_TYPE"),(0,o.kt)("td",{parentName:"tr",align:null},"Always ",(0,o.kt)("inlineCode",{parentName:"td"},"GATEWAY"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"GATEWAY_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"Should match GATEWAY_ID in the corresponding GATEWAY record")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"NOTIFY_ROUTE_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"This will be auto generated if left blank, else be sure to give it a unique value with respect to other records")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"TOPIC_MATCH"),(0,o.kt)("td",{parentName:"tr",align:null},"This can be anything, NOTIFY records will target this via the TOPIC field, and messages will be routed to all gateways with a matching TOPIC_MATCH value. In a simple/typical setup we make it match the GATEWAY_ID in the corresponding GATEWAY record")))),(0,o.kt)("p",null,"Here is an example NOTIFY_ROUTE entry:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"==================================\nNOTIFY_ROUTE\n==================================\nField Name                               Value                                    Type\n===========================================================================================\nTIMESTAMP                                2022-03-16 08:47:59.968(n:0,s:3572)      NANO_TIMESTAMP\nENTITY_ID                                                                         STRING\nENTITY_ID_TYPE                           GATEWAY                                  ENUM[USER_NAME PROFILE_NAME GATEWAY]\nGATEWAY_ID                               TestAlerts                               STRING\nNOTIFY_ROUTE_ID                          000000000000001NRLO1                     STRING\nTOPIC_MATCH                              TestAlerts                               STRING\n-------------------------------------------------------------------------------------------\n")),(0,o.kt)("h3",{id:"notify"},"NOTIFY"),(0,o.kt)("p",null,"Writing a record to this table which correctly points to a TOPIC, will result in a message being sent to the Teams channel the GATEWAY record is pointed to."),(0,o.kt)("p",null,"Equally, EVENT_NOTIFY_INSERT can be used, as opposed to a direct table write (and is the encouraged form of interaction), this event allows for the same set of fields as the DbRecord. The input fields detailed below cater for either approach."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Usage"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"APPLICATION_REF"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"BODY"),(0,o.kt)("td",{parentName:"tr",align:null},"The body of the message")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"DOCUMENT_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"EXPIRY"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"HEADER"),(0,o.kt)("td",{parentName:"tr",align:null},"The first line of the message")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"NOTIFY_COMPRESSION_TYPE"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"NOTIFY_ID"),(0,o.kt)("td",{parentName:"tr",align:null},"Severity of the alert. Value will be placed to right of header text in square brackets")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"NOTIFY_SEVERITY"),(0,o.kt)("td",{parentName:"tr",align:null},"Severity of the alert. Value will be placed to right of header text in square brackets")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SENDER"),(0,o.kt)("td",{parentName:"tr",align:null},"N/A")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"TOPIC"),(0,o.kt)("td",{parentName:"tr",align:null},"The TOPIC_MATCH value on the NOTIFY_ROUTE record you wish to target")))),(0,o.kt)("p",null,"Here is an example of using NOTIFY:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"==================================\nNOTIFY\n==================================\nField Name                               Value                                    Type\n===========================================================================================\nTIMESTAMP                                2022-03-16 12:29:50.659(n:0,s:4063)      NANO_TIMESTAMP\nAPPLICATION_REF                                                                   STRING\nBODY                                     This is my body                          STRING\nDOCUMENT_ID                                                                       STRING\nEXPIRY                                                                            DATETIME\nHEADER                                   My Header                                STRING\nNOTIFY_COMPRESSION_TYPE                                                           STRING\nNOTIFY_ID                                000000000000001NTLO1                     STRING\nNOTIFY_SEVERITY                          Information                              ENUM[Information Warning Serious Critical]\nSENDER                                                                            STRING\nTOPIC                                    TestAlerts                               STRING\n-------------------------------------------------------------------------------------------\n")),(0,o.kt)("p",null,"This example results in a Teams channel message, such as:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(95755).Z,width:"1009",height:"155"})))}u.isMDXComponent=!0},95755:function(t,e,n){e.Z=n.p+"assets/images/notify-teams-example-41342a13febbb85724e35e850b193217.png"}}]);