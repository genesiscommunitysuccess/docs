"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[35353],{80971:function(e,a,n){n.r(a),n.d(a,{assets:function(){return p},contentTitle:function(){return o},default:function(){return b},frontMatter:function(){return r},metadata:function(){return d},toc:function(){return m}});var t=n(87462),i=n(63366),l=(n(67294),n(3905)),s=(n(61839),["components"]),r={title:"Tables - basics",sidebar_label:"Tables - basics",id:"tables-basics",keywords:["database","tables","basics"],tags:["database","tables","basics"]},o=void 0,d={unversionedId:"database/fields-tables-views/tables/tables-basics",id:"version-2022.3/database/fields-tables-views/tables/tables-basics",title:"Tables - basics",description:"In your application's tables-dictionary.kts file, you need to define every table that your application needs. Let us go back to the very simple example definition that we started with. This contains a single table with three fields in it.",source:"@site/versioned_docs/version-2022.3/02_database/01_fields-tables-views/02_tables/01_tables-basics.md",sourceDirName:"02_database/01_fields-tables-views/02_tables",slug:"/database/fields-tables-views/tables/tables-basics",permalink:"/database/fields-tables-views/tables/tables-basics",draft:!1,tags:[{label:"database",permalink:"/tags/database"},{label:"tables",permalink:"/tags/tables"},{label:"basics",permalink:"/tags/basics"}],version:"2022.3",sidebarPosition:1,frontMatter:{title:"Tables - basics",sidebar_label:"Tables - basics",id:"tables-basics",keywords:["database","tables","basics"],tags:["database","tables","basics"]},sidebar:"databaseSidebar",previous:{title:"Tables - introduction",permalink:"/database/fields-tables-views/tables/"},next:{title:"Tables - advanced",permalink:"/database/fields-tables-views/tables/tables-advanced"}},p={},m=[{value:"Table name",id:"table-name",level:2},{value:"Table ID",id:"table-id",level:2},{value:"Fields",id:"fields",level:2},{value:"Primary key",id:"primary-key",level:2},{value:"Indices",id:"indices",level:2},{value:"Primary key and index names",id:"primary-key-and-index-names",level:3}],u={toc:m};function b(e){var a=e.components,n=(0,i.Z)(e,s);return(0,l.kt)("wrapper",(0,t.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"In your application's ",(0,l.kt)("strong",{parentName:"p"},"tables-dictionary.kts")," file, you need to define every table that your application needs. Let us go back to the very simple example definition that we started with. This contains a single table with three fields in it."),(0,l.kt)("p",null,"Then you can look closer at all the elements that can go into a table definition."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'tables {\n\n  table(name = "POSITION", id = 11002) {\n    sequence(POSITION_ID, "PS")\n    INSTRUMENT_ID\n    QUANTITY\n    NOTIONAL\n\n    primaryKey { \n      POSITION_ID\n    }\n  }\n\n}\n')),(0,l.kt)("h2",{id:"table-name"},"Table name"),(0,l.kt)("p",null,"When you define a table, you must start by giving it a name that is unique to the application: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'  table(name = "POSITION")\n')),(0,l.kt)("h2",{id:"table-id"},"Table ID"),(0,l.kt)("p",null,"Tables must also be given a Table ID that is unique to the application. This ensures that you can rename a table without losing the data in it."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'  table(name = "POSITION", id = 11002)\n')),(0,l.kt)("h2",{id:"fields"},"Fields"),(0,l.kt)("p",null,"After specifying a name and a Table ID, specify the fields in the table. "),(0,l.kt)("p",null,"You do not need to specify field types and other attributes - just the field name."),(0,l.kt)("p",null,"If you are using intelliJ IDE, it will auto-suggest the available fields; any references that are not known will be shown in red."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'\n  table(name = "POSITION", id = 11002) {\n    sequence(POSITION_ID, "PS")\n    INSTRUMENT_ID\n    QUANTITY\n    NOTIONAL\n\n  }\n\n')),(0,l.kt)("h2",{id:"primary-key"},"Primary key"),(0,l.kt)("p",null,"A table must have a single primary key."),(0,l.kt)("p",null,"It is common to use a single sequenced/autoIncrement field in the table as a ",(0,l.kt)("inlineCode",{parentName:"p"},"primaryKey"),"."),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"primaryKey")," needs to contain one or more fields in the table. Where using more than one field, the order of the fields matters in the case of wanting to search performantly based on a partial key."),(0,l.kt)("p",null,"The example below shows a ",(0,l.kt)("inlineCode",{parentName:"p"},"primaryKey")," with a single field: ",(0,l.kt)("inlineCode",{parentName:"p"},"POSITION_ID"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'tables {\n\n  table(name = "POSITION", id = 11002) {\n    sequence(POSITION_ID, "PS")\n    INSTRUMENT_ID\n    QUANTITY\n    NOTIONAL\n\n    primaryKey {\n      POSITION_ID\n    }\n  }\n\n}\n')),(0,l.kt)("h2",{id:"indices"},"Indices"),(0,l.kt)("p",null,"Indices are used in the following scenarios:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Creating additional unique constraints to the table's primary key"),(0,l.kt)("li",{parentName:"ul"},"Providing a performant record lookup (",(0,l.kt)("inlineCode",{parentName:"li"},"unique")," index)"),(0,l.kt)("li",{parentName:"ul"},"Providing an index for a performant ranged lookup (",(0,l.kt)("inlineCode",{parentName:"li"},"nonUnique")," index, else ",(0,l.kt)("inlineCode",{parentName:"li"},"unique")," index but searching on part of the key)")),(0,l.kt)("p",null,"You can define indices on a table in a similar fashion to ",(0,l.kt)("inlineCode",{parentName:"p"},"primaryKey"),". As with keys, indices are made up of one or more fields from the table. Where the indices are made up of multiple fields, the order of the fields matters if you want to search based on a partial index. This affects performance."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"    indices {\n        unique {\n            SESSION_AUTH_TOKEN\n        }\n        nonUnique {\n            USER_NAME\n        }\n    }\n")),(0,l.kt)("p",null,"When you define an index, you cannot supply exactly the same fields in exactly the same order as the primary key or another index on the same table."),(0,l.kt)("h3",{id:"primary-key-and-index-names"},"Primary key and index names"),(0,l.kt)("p",null,"It is not mandatory to give a primary key or an index a name. If you don't provide a name, it will be inferred:"),(0,l.kt)("p",null," ",(0,l.kt)("inlineCode",{parentName:"p"},"[TABLE_NAME]_BY_[FIELD_1](_[FIELD_N])")),(0,l.kt)("p",null," where FIELD_1 - FIELD_N are all the fields that make up the key/index in the order specified."),(0,l.kt)("p",null,"One exception is the common use case where the primary key is made up of a single field with a name of format ",(0,l.kt)("inlineCode",{parentName:"p"},"[TABLE_NAME]_[ID]"),". In this case, the inferred name is ",(0,l.kt)("inlineCode",{parentName:"p"},"[TABLE_NAME]_BY_ID"),"."),(0,l.kt)("p",null,"Let's see some examples. Below, the table name is ",(0,l.kt)("inlineCode",{parentName:"p"},"POSITION"),". The inferred names are shown in the comment before each primary key."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"    \n    //POSITION_BY_ID\n    primaryKey { \n        POSITION_ID\n    }\n\n    //POSITION_BY_OTHER_FIELD\n    primaryKey { \n        OTHER_FIELD\n    }\n    \n    //POSITION_BY_POSITION_ID_OTHER_FIELD_ANOTHER_FIELD\n    primaryKey { \n        OTHER_FIELD\n        ANOTHER_FIELD\n    }\n")),(0,l.kt)("p",null,"In this example, we have specified the name of the primary key in the ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," parameter."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'    primaryKey(name = "POSITION_PRIMARY_KEY") {\n      POSITION_ID\n    }\n')),(0,l.kt)("p",null,"Indices work the same way; either you specify the name in the ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," parameter or the name will be automatically inferred."))}b.isMDXComponent=!0}}]);