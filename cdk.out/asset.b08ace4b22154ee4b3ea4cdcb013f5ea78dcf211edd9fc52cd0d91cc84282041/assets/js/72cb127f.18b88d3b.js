"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[73346],{78446:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return o},default:function(){return k},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var a=n(87462),i=n(63366),r=(n(67294),n(3905)),l=(n(61839),["components"]),s={title:"Prerequisites - Gradle deploy plugin",sidebar_label:"Gradle deploy plugin",id:"gradle-deploy-plugin",keywords:["getting started","quick start","prerequisites","gradle","deploy plugin"],tags:["getting started","quick start","prerequisites","gradle","deploy plugin"]},o=void 0,p={unversionedId:"getting-started/prerequisites/gradle-deploy-plugin",id:"getting-started/prerequisites/gradle-deploy-plugin",title:"Prerequisites - Gradle deploy plugin",description:"The Genesis low-code platform provides a Gradle plugin that makes it easy to perform all the installation tasks that are",source:"@site/docs/01_getting-started/04_prerequisites/03_gradle-deploy-plugin.md",sourceDirName:"01_getting-started/04_prerequisites",slug:"/getting-started/prerequisites/gradle-deploy-plugin",permalink:"/next/getting-started/prerequisites/gradle-deploy-plugin",draft:!1,tags:[{label:"getting started",permalink:"/next/tags/getting-started"},{label:"quick start",permalink:"/next/tags/quick-start"},{label:"prerequisites",permalink:"/next/tags/prerequisites"},{label:"gradle",permalink:"/next/tags/gradle"},{label:"deploy plugin",permalink:"/next/tags/deploy-plugin"}],version:"current",sidebarPosition:3,frontMatter:{title:"Prerequisites - Gradle deploy plugin",sidebar_label:"Gradle deploy plugin",id:"gradle-deploy-plugin",keywords:["getting started","quick start","prerequisites","gradle","deploy plugin"],tags:["getting started","quick start","prerequisites","gradle","deploy plugin"]},sidebar:"learningSidebar",previous:{title:"Installing WSL",permalink:"/next/getting-started/prerequisites/installing-wsl"},next:{title:"Genx",permalink:"/next/getting-started/prerequisites/genx"}},d={},u=[{value:"Adding the deployment plugin to your project",id:"adding-the-deployment-plugin-to-your-project",level:3},{value:"Build script",id:"build-script",level:4},{value:"Target deployments",id:"target-deployments",level:3},{value:"General Setup",id:"general-setup",level:4},{value:"WSL",id:"wsl",level:4},{value:"Local Linux host",id:"local-linux-host",level:4},{value:"Remote Linux host (via SSH)",id:"remote-linux-host-via-ssh",level:4},{value:"Plugin Tasks",id:"plugin-tasks",level:2},{value:"Genesis set-up tasks",id:"genesis-set-up-tasks",level:3},{value:"Genesis deploy tasks",id:"genesis-deploy-tasks",level:3},{value:"Genesis script tasks",id:"genesis-script-tasks",level:3}],m={toc:u};function k(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Genesis low-code platform provides a Gradle plugin that makes it easy to perform all the installation tasks that are\nnecessary to deploy your own Genesis project on your local workstation, from your IDE."),(0,r.kt)("p",null,"The plugin is designed to work on workstations running Linux, or\non WSL."),(0,r.kt)("h3",{id:"adding-the-deployment-plugin-to-your-project"},"Adding the deployment plugin to your project"),(0,r.kt)("p",null,"The Genesis Gradle deploy plugin uses the project classpath to resolve dependent resources. So, in order not to not\ninterfere with any of your other project modules, it is best to add a ",(0,r.kt)("strong",{parentName:"p"},"${projectName}-deploy")," module to your project."),(0,r.kt)("p",null,"If you follow the Quick Start in this Learning Area, this module will provide you with part of the project template."),(0,r.kt)("p",null,"If you want to add this module to an existing project, then this is easy. The contents need only be two files;"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a Gradle properties file (the contents of this file depend on your target deployment, as you shall see below)"),(0,r.kt)("li",{parentName:"ul"},"a Gradle build script")),(0,r.kt)("h4",{id:"build-script"},"Build script"),(0,r.kt)("p",null,"The build script simply defines dependencies about distributions (both internal and external to the project), so that they can be\nresolved and deployed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'plugins {\n    id("global.genesis.deploy") version "${genesisVersion}"\n}\n\ndescription = "${productName}-deploy"\n\ndeploy {\n    productName = "${productName}"\n}\n\ndependencies {\n    implementation(\n        group = "global.genesis",\n        name = "genesis-distribution",\n        version = "${genesisVersion}",\n        classifier = "bin",\n        ext = "zip"\n    )\n    # add any other external genesis distributions here, AUTH, FIX etc.\n\n    api(project(":${productName}-distribution", "distribution"))\n    api(project(":${productName}-eventhandler"))\n    api(project(":${productName}-messages"))\n    api(project(":${productName}-site-specific", "distribution")) #if the project has a site-specific submodule\n}\n')),(0,r.kt)("p",null,"Please note the special configuration option on the internal modules. If adding this configuration to a project, you will need\nto add the following code to the build script of the internal module that you wish to make available for deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'val distribution by configurations.creating {\n    isCanBeConsumed = true\n    isCanBeResolved = false\n}\n\nartifacts {\n    val distzip = tasks.distZip.get()\n    add("distribution", distzip.archiveFile) {\n        builtBy(distzip)\n    }\n}\n')),(0,r.kt)("p",null,"This special piece of Gradle DSL makes the zip file of the distribution available on the class path so that it can be\nresolved by the deploy plugin."),(0,r.kt)("h3",{id:"target-deployments"},"Target deployments"),(0,r.kt)("p",null,"There are several possible configurations for your deployment. For each one, you need to set up your gradle.properties file in a specific way:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Windows Subsystem for Linux (WSL)"),(0,r.kt)("li",{parentName:"ul"},"a local Linux host"),(0,r.kt)("li",{parentName:"ul"},"a remote Linux host (via SSL)")),(0,r.kt)("h4",{id:"general-setup"},"General Setup"),(0,r.kt)("p",null,"Make sure you have a ",(0,r.kt)("strong",{parentName:"p"},"gradle.properties")," file inside a ",(0,r.kt)("strong",{parentName:"p"},".gradle")," folder in your user directory; this file must contain your Genesis Artifactory credentials in clear (unencrypted) text:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"genesisArtifactoryUser=<your-artifactory-user>\ngenesisArtifactoryPassword=<your-artifactory-password>\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This requires credentials for accessing Genesis Artifactory. If you have not been provided with the credentials, please contact your administrator, or ",(0,r.kt)("a",{parentName:"p",href:"mailto:support@genesis.global?subject=Quick%20Start%20-%20Artifactory%20Login"},"contact us"),". It's not possible to complete the training without this access, because you won't be able to download the Genesis platform components and build your project.")),(0,r.kt)("h4",{id:"wsl"},"WSL"),(0,r.kt)("p",null,"If your development workstation is a Windows machine, then you\ncan use WSL to have Genesis set-up\nlocally."),(0,r.kt)("p",null,"To configure this, open ",(0,r.kt)("inlineCode",{parentName:"p"},"gradle.properties")," from the server/jvm folder and add the following entries:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=<path-to-genesis-distribution-on-wsl>\nwsl-distro=<name-of-the-wsl-distro>\nwsl-user=<wsl-username>\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Entry"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home")),(0,r.kt)("td",{parentName:"tr",align:null},"This is a mandatory property that is a path to genesis distribution on the WSL distribution. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"/home/alpha/run"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"wsl-distro")),(0,r.kt)("td",{parentName:"tr",align:null},"This is a mandatory property that is the name of the WSL distribution. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"CentOS7"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"wsl-user")),(0,r.kt)("td",{parentName:"tr",align:null},"This is an optional property. If omitted, the default WSL user will be used. Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"alpha"))))),(0,r.kt)("p",null,"Sample configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=/home/alpha/run\nwsl-distro=CentOS7\nwsl-user=alpha\n")),(0,r.kt)("h4",{id:"local-linux-host"},"Local Linux host"),(0,r.kt)("p",null,"This is the easiest set-up, and applies if your development workstation is on a Linux machine."),(0,r.kt)("p",null,"To configure this, open ",(0,r.kt)("inlineCode",{parentName:"p"},"gradle.properties")," from the server/jvm folder and add the following entry:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=<path-to-genesis-distribution-on-wsl>\n")),(0,r.kt)("p",null,"The set-up task will create the folder (if it doesn't exist) and set up the Genesis platform there."),(0,r.kt)("h4",{id:"remote-linux-host-via-ssh"},"Remote Linux host (via SSH)"),(0,r.kt)("p",null,"This configuration is usable when using a remote host for the Genesis environment. Currently, only Linux hosts are\nsupported."),(0,r.kt)("p",null,"To configure this, open ",(0,r.kt)("inlineCode",{parentName:"p"},"gradle.properties")," from the server/jvm folder and add the following entries:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=<path-to-genesis-distribution-on-wsl>\nssh-username=<remote-host-username>\nssh-password=<remote-host-password>\nssh-host=<remote-host>\nssh-port=<remote-host-ssh-port>\n")),(0,r.kt)("p",null,"All the properties above are mandatory."),(0,r.kt)("p",null,"Sample configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=/home/user1/genesis560\nssh-username=user1\nssh-password=<password-for-user1>\nssh-host=user1-remotehost\nssh-port=22\n")),(0,r.kt)("h2",{id:"plugin-tasks"},"Plugin Tasks"),(0,r.kt)("p",null,"The Genesis deploy plugin comes with several tasks. They are grouped under ",(0,r.kt)("inlineCode",{parentName:"p"},"genesisdeploy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"genesissetup"),"."),(0,r.kt)("h3",{id:"genesis-set-up-tasks"},"Genesis set-up tasks"),(0,r.kt)("p",null,"These tasks deploy each external distribution, as well as site-specific configuration."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Task"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"createGenesisHome")),(0,r.kt)("td",{parentName:"tr",align:null},"This task creates the genesis home.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"install-genesis-distribution.zip")),(0,r.kt)("td",{parentName:"tr",align:null},"This task copies and unzips the Genesis distribution specified as a dependency.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"install-auth-distribution.zip")),(0,r.kt)("td",{parentName:"tr",align:null},"This task copies and unzips the auth distribution specified as a dependency.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"install-<project-name>-site-specific-1.0.0-SNAPSHOT-bin.zip-distribution.zip")),(0,r.kt)("td",{parentName:"tr",align:null},"This task copies and unzips the ",(0,r.kt)("inlineCode",{parentName:"td"},"<project-name>-site-specific>")," distribution specified as a dependency.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"loadInitialData")),(0,r.kt)("td",{parentName:"tr",align:null},"This task executes ",(0,r.kt)("inlineCode",{parentName:"td"},"install-<project-name>-site-specific-1.0.0-SNAPSHOT-bin.zip-distribution.zip")," and then calls all the ",(0,r.kt)("inlineCode",{parentName:"td"},"SendIt-<file>.csv")," tasks.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"setupEnvironment")),(0,r.kt)("td",{parentName:"tr",align:null},"This task executes ",(0,r.kt)("inlineCode",{parentName:"td"},"createGenesisHome")," then ",(0,r.kt)("inlineCode",{parentName:"td"},"install-genesis-distribution")," and then configures the installed distribution.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SendIt-<file>.csv")),(0,r.kt)("td",{parentName:"tr",align:null},"This task executes the script command ",(0,r.kt)("inlineCode",{parentName:"td"},"SendIt")," with the parameters -t ",(0,r.kt)("inlineCode",{parentName:"td"},"<file-name (in Uppercase)>")," and -f ",(0,r.kt)("inlineCode",{parentName:"td"},"<file-location>"),".")))),(0,r.kt)("h3",{id:"genesis-deploy-tasks"},"Genesis deploy tasks"),(0,r.kt)("p",null,"These tasks enable the deployment of the full project: single jars for each project module or just configuration files."),(0,r.kt)("p",null,"Below, note that ",(0,r.kt)("inlineCode",{parentName:"p"},"<project-name>")," must be replaced with the actual project name. For example, if the project you work on is called alpha, you would call it ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy-genesisproduct-alpha.zip")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Task"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deploy-genesisproduct-<project-name>.zip")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the current project to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".`")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deploy-<project-name>-eventhandler.jar")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the Event Handler jar to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deploy-<project-name>-messages.jar")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the messages jar to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deployConfig")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the config to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deployDictionary")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the dictionary to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"deployScripts")),(0,r.kt)("td",{parentName:"tr",align:null},"This task deploys the scripts to the Genesis environment specified for ",(0,r.kt)("inlineCode",{parentName:"td"},"genesis-home"),".")))),(0,r.kt)("p",null,"Note, this will take the last built distribution and does not run a project build as part of the task... ",(0,r.kt)("strong",{parentName:"p"},"so do that\nfirst"),"."),(0,r.kt)("h3",{id:"genesis-script-tasks"},"Genesis script tasks"),(0,r.kt)("p",null,"These tasks enable the invocation of any Genesis platform command via Gradle."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Task"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DbMon"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"genesisInstall"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"GenesisShell"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"killGroup"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"killServer"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"mon"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"remap"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SendIt"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"startGroup"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"startServer"))))))}k.isMDXComponent=!0}}]);