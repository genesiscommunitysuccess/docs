"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[62798],{57322:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return a},metadata:function(){return p},toc:function(){return g}});var i=t(87462),r=t(63366),o=(t(67294),t(3905)),s=(t(61839),["components"]),a={title:"Custom Endpoints - Configuring Runtime",sidebar_label:"Configuring Runtime",id:"configuring-runtime",keywords:["server","integration","custom endpoints","configuring runtime"],tags:["server","integration","custom endpoints","configuring runtime"]},u=void 0,p={unversionedId:"server/integration/custom-endpoints/configuring-runtime",id:"server/integration/custom-endpoints/configuring-runtime",title:"Custom Endpoints - Configuring Runtime",description:"Introduction | Basics |  Advanced | Examples | Configuring runtime | Testing",source:"@site/docs/03_server/10_integration/07_custom-endpoints/05_configuring-runtime.md",sourceDirName:"03_server/10_integration/07_custom-endpoints",slug:"/server/integration/custom-endpoints/configuring-runtime",permalink:"/next/server/integration/custom-endpoints/configuring-runtime",draft:!1,tags:[{label:"server",permalink:"/next/tags/server"},{label:"integration",permalink:"/next/tags/integration"},{label:"custom endpoints",permalink:"/next/tags/custom-endpoints"},{label:"configuring runtime",permalink:"/next/tags/configuring-runtime"}],version:"current",sidebarPosition:5,frontMatter:{title:"Custom Endpoints - Configuring Runtime",sidebar_label:"Configuring Runtime",id:"configuring-runtime",keywords:["server","integration","custom endpoints","configuring runtime"],tags:["server","integration","custom endpoints","configuring runtime"]},sidebar:"serverModulesSidebar",previous:{title:"Examples",permalink:"/next/server/integration/custom-endpoints/examples"},next:{title:"Testing",permalink:"/next/server/integration/custom-endpoints/testing"}},c={},g=[{value:"Configure Genesis Router",id:"configure-genesis-router",level:3},{value:"Configure processes.xml",id:"configure-processesxml",level:3}],l={toc:g};function m(e){var n=e.components,t=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,i.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/introduction/"},"Introduction")," | ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/basics/"},"Basics")," |  ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/advanced/"},"Advanced")," | ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/examples/"},"Examples")," | ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/configuring-runtime/"},"Configuring runtime")," | ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/testing/"},"Testing")),(0,o.kt)("h3",{id:"configure-genesis-router"},"Configure Genesis Router"),(0,o.kt)("p",null,"If you are going to use custom endpoints, it is essential that you configure the ",(0,o.kt)("a",{parentName:"p",href:"/server/configuring-runtime/genesis-router/"},"Genesis Router"),"."),(0,o.kt)("p",null,"Here is an example configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kts"},"router {\n    webPort = 9064\n    socketPort = 9065\n\n    httpServerCodec {\n        maxInitialLineLength = 4096\n        maxHeaderSize = 8192\n        maxChunkSize = 8192\n        validateHeaders = true\n        initialBufferSize = 128\n    }\n    httpObjectAggregator {\n        maxContentLength = 262144\n        closeOnExpectationFailed = false\n    }\n}\n")),(0,o.kt)("p",null,"With the above configuration, you can access the endpoint at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://{your_host}:9064/custom_endpoint"),". For the file upload example shown ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/custom-endpoints/basics/#a-simple-example-of-a-custom-endpoint"},"here"),", the custom endpoint URL is ",(0,o.kt)("inlineCode",{parentName:"p"},"http://{your_host}:9064/file-handler/upload"),"."),(0,o.kt)("h3",{id:"configure-processesxml"},"Configure processes.xml"),(0,o.kt)("p",null,"You need to alter the GENESIS_ROUTER process configuration, which is defined in the ",(0,o.kt)("strong",{parentName:"p"},"genesis-processes.xml")," file located in the ",(0,o.kt)("strong",{parentName:"p"},"~/run/genesis/cfg")," folder."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Add the name of the package, where the custom endpoint is defined in the ",(0,o.kt)("a",{parentName:"li",href:"/server/configuring-runtime/processes/#package"},"package")," tag. In the example below, this is ",(0,o.kt)("inlineCode",{parentName:"li"},"alpha.custom.endpoint"),"."),(0,o.kt)("li",{parentName:"ul"},"Add the Jar file of the submodule containing the custom endpoint to the ",(0,o.kt)("a",{parentName:"li",href:"/server/configuring-runtime/processes/#classpath"},"classpath")," tag. In the example below, this is ",(0,o.kt)("inlineCode",{parentName:"li"},"alpha-file-processor-*.jar"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml",metastring:"{6,10}","{6,10}":!0},'<process name="GENESIS_ROUTER">\n        <start>true</start>\n        <groupId>GENESIS</groupId>\n        <options>-Xmx512m -DXSD_VALIDATE=false</options>\n        <module>router</module>\n        <package>global.genesis.router,global.genesis.console,alpha.custom.endpoint</package>\n        <config>router-process-config.kts</config>\n        <script>genesis-router.kts<\/script>\n        <language>pal</language>\n        <classpath>genesis-console-*.jar,alpha-file-processor-*.jar</classpath>\n        <description>Socket, Websocket and HTTP proxy which routes incoming messages to GENESIS microservices</description>\n</process>\n')),(0,o.kt)("p",null,"There is more information on how we define processes, in our page on ",(0,o.kt)("a",{parentName:"p",href:"/server/configuring-runtime/processes"},"process.xml"),"."))}m.isMDXComponent=!0}}]);