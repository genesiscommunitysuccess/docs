"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[63684],{63997:function(e,n,o){o.r(n),o.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return g},frontMatter:function(){return a},metadata:function(){return d},toc:function(){return u}});var i=o(87462),r=o(63366),t=(o(67294),o(3905)),s=(o(61839),["components"]),a={title:"Consolidator - Configuring Runtime",sidebar_label:"Configuring Runtime",id:"configuring-runtime",keywords:["server","consolidator","configuring runtime"],tags:["server","consolidator","configuring runtime"]},l=void 0,d={unversionedId:"server/consolidator/configuring-runtime",id:"version-2022.3/server/consolidator/configuring-runtime",title:"Consolidator - Configuring Runtime",description:"Introduction | Basics |  Advanced | Examples | Configuring runtime | Testing",source:"@site/versioned_docs/version-2022.3/03_server/07_consolidator/05_configuring-runtime.md",sourceDirName:"03_server/07_consolidator",slug:"/server/consolidator/configuring-runtime",permalink:"/server/consolidator/configuring-runtime",draft:!1,tags:[{label:"server",permalink:"/tags/server"},{label:"consolidator",permalink:"/tags/consolidator"},{label:"configuring runtime",permalink:"/tags/configuring-runtime"}],version:"2022.3",sidebarPosition:5,frontMatter:{title:"Consolidator - Configuring Runtime",sidebar_label:"Configuring Runtime",id:"configuring-runtime",keywords:["server","consolidator","configuring runtime"],tags:["server","consolidator","configuring runtime"]},sidebar:"serverModulesSidebar",previous:{title:"Examples",permalink:"/server/consolidator/examples"},next:{title:"Testing",permalink:"/server/consolidator/testing"}},c={},u=[{value:"Adding the Consolidator to processes.xml",id:"adding-the-consolidator-to-processesxml",level:2},{value:"Adding the Consolidator to the service-definitions.xml",id:"adding-the-consolidator-to-the-service-definitionsxml",level:2}],p={toc:u};function g(e){var n=e.components,o=(0,r.Z)(e,s);return(0,t.kt)("wrapper",(0,i.Z)({},p,o,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/introduction"},"Introduction")," | ",(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/basics"},"Basics")," |  ",(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/advanced"},"Advanced")," | ",(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/examples"},"Examples")," | ",(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/configuring-runtime"},"Configuring runtime")," | ",(0,t.kt)("a",{parentName:"p",href:"/server/consolidator/testing"},"Testing")),(0,t.kt)("p",null,"For your Consolidator to run, it must be defined as a process and included as a service definition. Make sure you update the following files in your application:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("strong",{parentName:"li"},"processes.xml")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("strong",{parentName:"li"},"service-definitions.xml"))),(0,t.kt)("h2",{id:"adding-the-consolidator-to-processesxml"},"Adding the Consolidator to processes.xml"),(0,t.kt)("p",null,"Your application's ",(0,t.kt)("strong",{parentName:"p"},"processes.xml")," file is located in the ",(0,t.kt)("strong",{parentName:"p"},".cfg")," folder for the application. The file contains tags that define key characteristics of the Consolidator - for example, dependencies and logging level. "),(0,t.kt)("p",null,"Here is an example configuration (the tags are explained in the page on the ",(0,t.kt)("a",{parentName:"p",href:"/server/configuring-runtime/processes/"},"processes.xml file"),"):"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-kotlin"},'<process name="POSITION_CONSOLIDATOR">\n        <groupId>POSITION</groupId>\n        <description>Consolidates trades to calculate positions</description>\n        <start>true</start>\n        <options>-Xmx256m -DRedirectStreamsToLog=true -DXSD_VALIDATE=false -XX:MaxHeapFreeRatio=70 -XX:MinHeapFreeRatio=30 -XX:+UseG1GC -XX:+UseStringDeduplication -XX:OnOutOfMemoryError="handleOutOfMemoryError.sh %p"</options>\n        <module>genesis-pal-consolidator</module>\n        <package>global.genesis.pal.consolidator</package>\n        <primaryOnly>false</primaryOnly>\n        <script>position-consolidator.kts<\/script>\n        <loggingLevel>DEBUG,DATADUMP_ON</loggingLevel>\n        <language>pal</language>\n    </process>\n</process>\n')),(0,t.kt)("admonition",{type:"important"},(0,t.kt)("p",{parentName:"admonition"},"In a multi-node environment, Consolidator services should be set to primary only; otherwise, the changes will be applied\nmultiple times.")),(0,t.kt)("h2",{id:"adding-the-consolidator-to-the-service-definitionsxml"},"Adding the Consolidator to the service-definitions.xml"),(0,t.kt)("p",null,"Your application's ",(0,t.kt)("a",{parentName:"p",href:"/server/configuring-runtime/service-definitions"},"service-definitions.xml")," file is where you specify the ports used by each process for communicating internally. You need to add an entry for your Consolidator, using an unused port number. For example:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},' <service host="localhost" name="POSITION_CONSOLIDATOR" port="11003"/>\n')))}g.isMDXComponent=!0}}]);