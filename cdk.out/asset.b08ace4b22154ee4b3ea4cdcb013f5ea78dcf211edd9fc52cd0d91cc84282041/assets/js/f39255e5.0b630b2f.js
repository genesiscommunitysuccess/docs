"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[79663],{5959:function(e,t,i){i.r(t),i.d(t,{assets:function(){return d},contentTitle:function(){return o},default:function(){return h},frontMatter:function(){return r},metadata:function(){return p},toc:function(){return c}});var n=i(87462),a=i(63366),s=(i(67294),i(3905)),l=(i(61839),["components"]),r={title:"Server Setup - Initial Application Install",sidebar_label:"Initial Application Install",sidebar_position:2,id:"initial-application-install",keywords:["operations","server","setup","initial","application","install"],tags:["database","server","setup","initial","application","install"]},o=void 0,p={unversionedId:"operations/server-setup/initial-application-install",id:"operations/server-setup/initial-application-install",title:"Server Setup - Initial Application Install",description:"This document describes installing an application built with Genesis frameworks.  It is written for a reader with some",source:"@site/docs/05_operations/01_server-setup/02_initial-application-install.md",sourceDirName:"05_operations/01_server-setup",slug:"/operations/server-setup/initial-application-install",permalink:"/next/operations/server-setup/initial-application-install",draft:!1,tags:[{label:"database",permalink:"/next/tags/database"},{label:"server",permalink:"/next/tags/server"},{label:"setup",permalink:"/next/tags/setup"},{label:"initial",permalink:"/next/tags/initial"},{label:"application",permalink:"/next/tags/application"},{label:"install",permalink:"/next/tags/install"}],version:"current",sidebarPosition:2,frontMatter:{title:"Server Setup - Initial Application Install",sidebar_label:"Initial Application Install",sidebar_position:2,id:"initial-application-install",keywords:["operations","server","setup","initial","application","install"],tags:["database","server","setup","initial","application","install"]},sidebar:"operationsSidebar",previous:{title:"Host Preparation",permalink:"/next/operations/server-setup/host-preparation"},next:{title:"Config Management",permalink:"/next/operations/server-setup/config-management"}},d={},c=[{value:"Installing build artifacts",id:"installing-build-artifacts",level:2},{value:"Transferring the build artifacts",id:"transferring-the-build-artifacts",level:3},{value:"Installation of code",id:"installation-of-code",level:3},{value:"Application paths",id:"application-paths",level:4},{value:"Unzipping the code",id:"unzipping-the-code",level:3},{value:"Application code",id:"application-code",level:4},{value:"Web code",id:"web-code",level:4},{value:"Installation of site-specific configuration",id:"installation-of-site-specific-configuration",level:3},{value:"Post-install tasks",id:"post-install-tasks",level:3}],u={toc:c};function h(e){var t=e.components,i=(0,a.Z)(e,l);return(0,s.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"This document describes installing an application built with Genesis frameworks.  It is written for a reader with some\nLinux system administration experience."),(0,s.kt)("h2",{id:"installing-build-artifacts"},"Installing build artifacts"),(0,s.kt)("h3",{id:"transferring-the-build-artifacts"},"Transferring the build artifacts"),(0,s.kt)("p",null,"After a build process is finished, the result is a build artifacts ready to be installed.  At present, Genesis\nframework applications are build as ZIP files ready to be copied to and unzipped on the target host(s).  The\napplication's developer will be able to advise which is the correct ZIP files."),(0,s.kt)("p",null,"Copy the build artifact onto the host by whatever means local security policies allow.  "),(0,s.kt)("h3",{id:"installation-of-code"},"Installation of code"),(0,s.kt)("p",null,"The build artifact is unlikely to contain absolute paths for its files, so it is important to have the correct extract\ndirectory when unzipping them."),(0,s.kt)("p",null,"You can examine the files inside with the 'zipinfo' command (part of the unzip package).  This is sample output for\npart of the Genesis framework distribution ZIP (actually used during application build).  Individual applications\nmay have a different top level directory, named after the application."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"$ zipinfo genesis-distribution-6.1.0-bin.zip \nArchive:  genesis-distribution-6.1.0-bin.zip\nZip file size: 234214088 bytes, number of entries: 573\ndrwxr-xr-x  2.0 unx        0 b- defN 22-Jul-10 16:24 genesis/\ndrwxr-xr-x  2.0 unx        0 b- defN 22-Jul-10 16:24 genesis/bin/\n-rw-r--r--  2.0 unx   118037 b- defN 22-Jul-10 16:04 genesis/bin/genesis-consolidator2-6.1.0.jar\n-rw-r--r--  2.0 unx   531691 b- defN 22-Jul-10 16:04 genesis/bin/genesis-cluster-6.1.0.jar\n-rw-r--r--  2.0 unx   101884 b- defN 22-Jul-10 16:24 genesis/bin/genesis-webmon-6.1.0.jar\n(and more)\n")),(0,s.kt)("h4",{id:"application-paths"},"Application paths"),(0,s.kt)("p",null,"The default application install path for Genesis built applications is chosen to divide the application up (for when more\nthan one application is installed on a host) and to manage versions.  For portability, Genesis application artifacts\nrepresent complete installs, including everything they need inside one directory tree."),(0,s.kt)("p",null,"The default path for server-side code is generated as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"installDate=$(date +%Y%m%d)\nrunUser=<provide the username the application will run as>\n\n# make the server directory and maintain a symlink in the runUser's homedir\nmkdir -p /data/${runUser}/server/${installDate}/run\nrm -f /home/${runUser}/run\nln -s /data/${runUser}/server/${installDate}/run /home/${runUser}/run\n")),(0,s.kt)("p",null,"The web code is served up by nginx, and so it is installed separately from the server-side code.  The default path for\nthe web code is generated as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"installDate=$(date +%Y%m%d)\nrunUser=<provide the username the application will run as>\n\n# make the directory and create a stable path for the nginx document root\nmkdir -p /data/${runUser}/web-${installDate}\nrm -f /data/${runUser}/web\nln -s /data/${runUser}/web-${installDate} /data/${runUser}/web\n")),(0,s.kt)("h3",{id:"unzipping-the-code"},"Unzipping the code"),(0,s.kt)("h4",{id:"application-code"},"Application code"),(0,s.kt)("p",null,"Given the ZIP files will contain relative paths, the extract path matters.  Therefore, either chdir to the correct\ndirectory, or use a command-line argument to unzip."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"installDir=$(date +%Y%m%d)\nrunUser=<provide the username the application will run as>\n\ncd /data/${runUser}/server/${installDate}/run; unzip <absolute path to application ZIP>\n\n# OR\n\nunzip <absolute path to application ZIP> -d /data/${runUser}/server/${installDate}/run\n")),(0,s.kt)("h4",{id:"web-code"},"Web code"),(0,s.kt)("p",null,"The web ZIP is also likely to contain relative paths, so again, the extract path matters.  Therefore, either chdir to\nthe correct directory, or use a command-line argument to unzip."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"installDir=$(date +%Y%m%d)\nrunUser=<provide the username the application will run as>\n\ncd /data/${runUser}/web-${installDate}; unzip <absolute path to web ZIP>\n\n# OR\n\nunzip <absolute path to web ZIP> -d /data/${runUser}/web-${installDate}\n")),(0,s.kt)("h3",{id:"installation-of-site-specific-configuration"},"Installation of site-specific configuration"),(0,s.kt)("p",null,"The final build artifact is configuration for the running environment.  Genesis supports both separate config, where\nonly the given environment config is provide, or unified config, where each separate environment is specified in the\nconfig."),(0,s.kt)("p",null,"Each approach has its virtues.  Separate config maintains separation between environments.  Unified config provides a\nsingle artifact for all environments (this helps to confirm that what is live, is what was tested)."),(0,s.kt)("p",null,'This is also a ZIP file, containing relative paths (the top-level directory is always "site-specfic").'),(0,s.kt)("p",null,"This needs to be installed in the server-side code directory, following a very similar pattern to installing the\nserver-side code."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"installDir=$(date %Y%m%d)\nrunUser=<provide the username the application will run as>\n\ncd /data/${runUser}/server/${installDate}/run; unzip <absolute path to site-specific ZIP>\n\n# OR\n\nunzip <absolute path to site-specific ZIP> -d /data/${runUser}/server/${installDate}/run\n")),(0,s.kt)("h3",{id:"post-install-tasks"},"Post-install tasks"),(0,s.kt)("p",null,"Any last changes to the configuration files should be made before proceeding.  Whether the site-specific config\nprovides a complete configuration set is a matter for the developer and the system administrator providing the\ndeveloper with all necessary information."),(0,s.kt)("p",null,"If anything cannot be determined at site-specific ZIP build time, it may need manual change on the host."),(0,s.kt)("p",null,"Following this, several Genesis commands must be run to complete the installation.  Both must be run as the application\nuser, as they will generate files with the ownership of the user running the  command."),(0,s.kt)("p",null,"The command ",(0,s.kt)("inlineCode",{parentName:"p"},"genesisInstall")," will create a set of files, consolidating config to create a unified view of it, which the\nprocesses will consume.  It is needed after an install or an upgrade."),(0,s.kt)("p",null,"The command ",(0,s.kt)("inlineCode",{parentName:"p"},"remap --commit")," handles the data model, and thus database schema.  It has some arguments that control its\nbehaviour  but its purpose is to generate DAO (data access object) classes and apply the data model schema to the\ndatabase."))}h.isMDXComponent=!0}}]);