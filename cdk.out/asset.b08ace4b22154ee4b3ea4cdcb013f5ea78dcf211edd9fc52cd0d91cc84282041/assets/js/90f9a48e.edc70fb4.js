"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[8965],{60657:function(e,t,n){n.r(t),n.d(t,{assets:function(){return g},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return c}});var a=n(87462),i=n(63366),d=(n(67294),n(3905)),r=(n(61839),["components"]),l={title:"Developer training - Day four",sidebar_label:"Day four",sidebar_position:6,id:"training-content-day4",keywords:["getting started","quick start","developer training","day four"],tags:["getting started","quick start","developer training","day four"]},s=void 0,o={unversionedId:"getting-started/developer-training/training-content-day4",id:"getting-started/developer-training/training-content-day4",title:"Developer training - Day four",description:"Day three recap",source:"@site/docs/01_getting-started/06_developer-training/04_training-content-day4.md",sourceDirName:"01_getting-started/06_developer-training",slug:"/getting-started/developer-training/training-content-day4",permalink:"/next/getting-started/developer-training/training-content-day4",draft:!1,tags:[{label:"getting started",permalink:"/next/tags/getting-started"},{label:"quick start",permalink:"/next/tags/quick-start"},{label:"developer training",permalink:"/next/tags/developer-training"},{label:"day four",permalink:"/next/tags/day-four"}],version:"current",sidebarPosition:6,frontMatter:{title:"Developer training - Day four",sidebar_label:"Day four",sidebar_position:6,id:"training-content-day4",keywords:["getting started","quick start","developer training","day four"],tags:["getting started","quick start","developer training","day four"]},sidebar:"learningSidebar",previous:{title:"Day three",permalink:"/next/getting-started/developer-training/training-content-day3"},next:{title:"Day five",permalink:"/next/getting-started/developer-training/training-content-day5"}},g={},c=[{value:"State management\u200b",id:"state-management",level:2},{value:"1. Data model",id:"1-data-model",level:3},{value:"2. Create a new class for the state machine",id:"2-create-a-new-class-for-the-state-machine",level:3},{value:"3. Add the module as a dependency in the <em>build.gradle.kts</em> inside <strong>alpha-script-config</strong> module.",id:"3-add-the-module-as-a-dependency-in-the-buildgradlekts-inside-alpha-script-config-module",level:3},{value:"4. Edit the event handler to add an integrated state machine",id:"4-edit-the-event-handler-to-add-an-integrated-state-machine",level:3},{value:"Exercise 4.1: state machines",id:"exercise-41-state-machines",level:3},{value:"Adding logic to the Event Handler",id:"adding-logic-to-the-event-handler",level:2},{value:"Add the validation code",id:"add-the-validation-code",level:3},{value:"Exercise 4.2: adding onValidate to event handlers",id:"exercise-42-adding-onvalidate-to-event-handlers",level:3},{value:"Auditing\u200b",id:"auditing",level:2},{value:"Adding basic auditing",id:"adding-basic-auditing",level:3},{value:"Adding audit to table dictionary",id:"adding-audit-to-table-dictionary",level:4},{value:"Updating the state machine to use auditing",id:"updating-the-state-machine-to-use-auditing",level:4},{value:"Update the Event Handlers to use auditing",id:"update-the-event-handlers-to-use-auditing",level:4},{value:"Exercise 4.3: testing an audited table",id:"exercise-43-testing-an-audited-table",level:3}],A={toc:c};function h(e){var t=e.components,l=(0,i.Z)(e,r);return(0,d.kt)("wrapper",(0,a.Z)({},A,l,{components:t,mdxType:"MDXLayout"}),(0,d.kt)("details",null,(0,d.kt)("summary",null,"Day three recap"),(0,d.kt)("div",null,(0,d.kt)("div",null,"Here are the main takeaways from ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/"},"Day three"),"."),(0,d.kt)("li",null,"We introduced ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#views"},"Views")," and how you can use them."),(0,d.kt)("li",null,"We extended our application adding ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#extending-trade-and-adding-position-table"},"Position")," table."),(0,d.kt)("li",null,"We started writing some ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#automated-testing"},"automated tests")," for our application."),(0,d.kt)("li",null,"We added ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#calculated-data"},"calculated data (derived fields)")," into our main View."),(0,d.kt)("li",null,(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#consolidators"},"Consolidators")," perform data aggregation and calculations, and here we created one to real-time feed the Positions table."),(0,d.kt)("li",null,"We added a ",(0,d.kt)("a",{href:"/getting-started/developer-training/training-content-day3/#ui-configuring"},"grid")," in the UI to display the Positions using Grid Pro, with more flexibility to customize the HTML and CSS."))),(0,d.kt)("p",null,"This day covers:"),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("a",{parentName:"li",href:"#state-management"},"State management\u200b")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("a",{parentName:"li",href:"#adding-logic-to-the-event-handler"},"Adding logic to the event handler")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("a",{parentName:"li",href:"#auditing"},"Auditing\u200b"))),(0,d.kt)("h2",{id:"state-management"},"State management\u200b"),(0,d.kt)("p",null,"State machines enable you to control workflow by defining the transitions from state to state. This example enables you to build a very simple state machine so that you can add new trades. You will create a new field called TRADE_STATUS, which can have three possible states: NEW, ALLOCATED, CANCELLED."),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},"NEW can go to ALLOCATED or CANCELLED."),(0,d.kt)("li",{parentName:"ul"},"ALLOCATED and CANCELLED can\u2019t go anywhere else."),(0,d.kt)("li",{parentName:"ul"},"NEW is the only state you can use to insert new records.")),(0,d.kt)("p",null,(0,d.kt)("img",{src:n(7313).Z,width:"642",height:"431"})),(0,d.kt)("p",null,"Once we have added add a new field to the data model, we will edit the event handler file to add controlled transitions from one state to another."),(0,d.kt)("h3",{id:"1-data-model"},"1. Data model"),(0,d.kt)("p",null,"Make sure you added the TRADE_STATUS field to the TRADE table in the ",(0,d.kt)("strong",{parentName:"p"},"alpha-tables-dictionary.kts")," file."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{4}","{4}":!0},'tables {\n  table (name = "TRADE", id = 2000) {\n    ...\n    TRADE_STATUS\n\n    primaryKey {\n      TRADE_ID\n    }\n\n  }\n  ...\n}\n')),(0,d.kt)("p",null,"If the TRADE_STATUS is missing, run ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#generatefields"},"genesis-generated-fields")," to generate the fields, AND\u200b ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#generatedao"},"genesis-generated-dao")," to create the DAOs."),(0,d.kt)("h3",{id:"2-create-a-new-class-for-the-state-machine"},"2. Create a new class for the state machine"),(0,d.kt)("p",null,"Add a main folder in the event handler module ",(0,d.kt)("em",{parentName:"p"},"alpha-eventhandler")," and create a state machine class called ",(0,d.kt)("em",{parentName:"p"},"TradeStateMachine")," inside ",(0,d.kt)("strong",{parentName:"p"},"alpha-eventhandler/src/main/kotlin/global/genesis"),"."),(0,d.kt)("p",null,"Add a state machine definition and assign a field in the ",(0,d.kt)("strong",{parentName:"p"},"onCommit")," block,"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin"},'package global.genesis\n\nimport com.google.inject.Inject\nimport global.genesis.commons.annotation.Module\nimport global.genesis.db.rx.entity.multi.AsyncEntityDb\nimport global.genesis.db.statemachine.StateMachine\nimport global.genesis.db.statemachine.Transition\nimport global.genesis.gen.dao.Trade\nimport global.genesis.gen.dao.enums.TradeStatus\n\n@Module\nclass TradeStateMachine @Inject constructor(\n    db: AsyncEntityDb\n) {\n    private val internalState: StateMachine<Trade, TradeStatus, TradeEffect> = db.stateMachineBuilder {\n        readState { tradeStatus }\n\n        state(TradeStatus.NEW) {\n            isMutable = true\n\n            initialState(TradeEffect.New) {\n                onValidate { trade ->\n                    if (trade.isTradeIdInitialised && trade.tradeId.isNotEmpty()) {\n                        verify {\n                            db hasNoEntry Trade.ById(trade.tradeId)\n                        }\n                    }\n                }\n            }\n\n            onCommit { trade ->\n                if (trade.enteredBy == "TestUser") {\n                    trade.price = 10.0\n                }\n            }\n\n            transition(TradeStatus.ALLOCATED, TradeEffect.Allocated)\n            transition(TradeStatus.CANCELLED, TradeEffect.Cancelled)\n        }\n\n        state(TradeStatus.ALLOCATED) {\n            isMutable = false\n\n            transition(TradeStatus.NEW, TradeEffect.Cancelled)\n            transition(TradeStatus.CANCELLED, TradeEffect.Cancelled)\n        }\n\n        state(TradeStatus.CANCELLED) {\n            isMutable = false\n        }\n    }\n\n    suspend fun insert(trade: Trade): Transition<Trade, TradeStatus, TradeEffect> = internalState.create(trade)\n\n    suspend fun modify(tradeId: String, modify: suspend (Trade) -> Unit): Transition<Trade, TradeStatus, TradeEffect>? =\n        internalState.update(Trade.ById(tradeId)) { trade, _ -> modify(trade) }\n\n    suspend fun modify(trade: Trade): Transition<Trade, TradeStatus, TradeEffect>? = internalState.update(trade)\n}\n\nsealed class TradeEffect {\n    object New : TradeEffect()\n    object Allocated : TradeEffect()\n    object Cancelled : TradeEffect()\n}\n')),(0,d.kt)("h3",{id:"3-add-the-module-as-a-dependency-in-the-buildgradlekts-inside-alpha-script-config-module"},"3. Add the module as a dependency in the ",(0,d.kt)("em",{parentName:"h3"},"build.gradle.kts")," inside ",(0,d.kt)("strong",{parentName:"h3"},"alpha-script-config")," module."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre"},'...\napi(project(":alpha-eventhandler"))\n...\n')),(0,d.kt)("h3",{id:"4-edit-the-event-handler-to-add-an-integrated-state-machine"},"4. Edit the event handler to add an integrated state machine"),(0,d.kt)("p",null,"Let's edit the event handler to add an integrated state machine. First, in the ",(0,d.kt)("strong",{parentName:"p"},"alpha-eventhandler.kts")," file, declare a variable to be visible to all events by injecting the class ",(0,d.kt)("inlineCode",{parentName:"p"},"TradeStateMachine")," that we have just created. "),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{2}","{2}":!0},'eventHandler {\n    val stateMachine = inject<TradeStateMachine>()\n\n    eventHandler<Trade>(name = "TRADE_INSERT", transactional = true) {\n        ...\n    }\n    ...\n}\n')),(0,d.kt)("p",null,"Then, integrate the state machine in the TRADE_INSERT event ",(0,d.kt)("em",{parentName:"p"},"onCommit"),"."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{2,5}","{2,5}":!0},'eventHandler<Trade>(name = "TRADE_INSERT") {\n    onCommit { event ->\n        val trade = event.details\n        trade.enteredBy = event.userName\n        stateMachine.insert(trade)\n        ack()\n    }\n}\n')),(0,d.kt)("p",null,"Create two data classes that will be used in the cancel and allocated Event Handlers. These classes should be in ",(0,d.kt)("strong",{parentName:"p"},"alpha-messages/src/main/kotlin/global/genesis/alpha/message/event")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},"TradeAllocated"),(0,d.kt)("li",{parentName:"ul"},"TradeCancelled")),(0,d.kt)("p",null,"Both classes have a single field: ",(0,d.kt)("strong",{parentName:"p"},"tradeId"),"."),(0,d.kt)("p",null,"TradeAllocated:"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin"},"package global.genesis.alpha.message.event\n\ndata class TradeAllocated(val tradeId: String)\n")),(0,d.kt)("p",null,"TradeCancelled:"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin"},"package global.genesis.alpha.message.event\n\ndata class TradeCancelled(val tradeId: String)\n")),(0,d.kt)("p",null,"Create a new event handler called TRADE_CANCELLED to handle cancellations. Then integrate the state machine in it."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin"},'eventHandler<TradeCancelled>(name = "TRADE_CANCELLED", transactional = true) {\n    onCommit { event ->\n        val message = event.details\n        stateMachine.modify(message.tradeId) { trade ->\n            trade.tradeStatus = TradeStatus.CANCELLED\n        }\n        ack()\n    }\n}\n')),(0,d.kt)("p",null,"Create a new event handler called TRADE_ALLOCATED to handle completion. Integrate the state machine in it."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin"},'eventHandler<TradeAllocated>(name = "TRADE_ALLOCATED", transactional = true) {\n    onCommit { event ->\n        val message = event.details\n        stateMachine.modify(message.tradeId) { trade ->\n            trade.tradeStatus = TradeStatus.ALLOCATED\n        }\n        ack()\n    }\n}\n')),(0,d.kt)("p",null,"Modify or add the TRADE_MODIFY Event Handler to use the state machine."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{4}","{4}":!0},'eventHandler<Trade>(name = "TRADE_MODIFY", transactional = true) {\n    onCommit { event ->\n        val trade = event.details\n        stateMachine.modify(trade)\n        ack()\n    }\n}\n')),(0,d.kt)("p",null,"Remove the TRADE_DELETE Event Handler if you included it before."),(0,d.kt)("p",null,"You want to manage the state of the trade, so remove the delete Event Handler. If a trade is incorrect and needs to be deleted, similar functionality can be achieved by cancelling the trade."),(0,d.kt)("p",null,"To test it, you can try to modify a TRADE and see the states changing accordingly. "),(0,d.kt)("h3",{id:"exercise-41-state-machines"},"Exercise 4.1: state machines"),(0,d.kt)("admonition",{title:"ESTIMATED TIME",type:"info"},(0,d.kt)("p",{parentName:"admonition"},"40 mins")),(0,d.kt)("p",null,"Modify the class TradeStateMachine to keep the ",(0,d.kt)("inlineCode",{parentName:"p"},"trade.price"),". Removing the current rule when TradeStatus.NEW, and set the field trade.enteredBy to empty when TradeStatus.CANCELLED."),(0,d.kt)("admonition",{title:"UI CHANGES",type:"info"},(0,d.kt)("p",{parentName:"admonition"},"Open the ",(0,d.kt)("strong",{parentName:"p"},"home.ts")," file and add the TRADE_STATUS field in the const ",(0,d.kt)("em",{parentName:"p"},"COLUMNS"),"."),(0,d.kt)("pre",{parentName:"admonition"},(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{29-33}","{29-33}":!0},"...\n//grid columns that will be showed\nconst COLUMNS = [\n  {\n    ...defaultColumnConfig,\n    field: 'TRADE_ID',\n    headerName: 'Id',\n  },\n  {\n    ...defaultColumnConfig,\n    field: 'QUANTITY',\n    headerName: 'Quantity',\n  },\n  {\n    ...defaultColumnConfig,\n    field: 'PRICE',\n    headerName: 'Price',\n  },\n  {\n    ...defaultColumnConfig,\n    field: 'SYMBOL',\n    headerName: 'Symbol',\n  },\n  {\n    ...defaultColumnConfig,\n    field: 'DIRECTION',\n    headerName: 'Direction',\n  },\n  {\n    ...defaultColumnConfig,\n    field: 'TRADE_STATUS',\n    headerName: 'Status',\n  },  \n];\n\n@customElement({\n  name,\n  template,\n  styles,\n})\nexport class Home extends FASTElement {\n    ...\n    constructor() {\n      super();\n    }\n}\n\n")),(0,d.kt)("p",{parentName:"admonition"},"And add the ",(0,d.kt)("em",{parentName:"p"},"deleteEvent")," as to the ",(0,d.kt)("strong",{parentName:"p"},"home.template.ts")," file."),(0,d.kt)("pre",{parentName:"admonition"},(0,d.kt)("code",{parentName:"pre",className:"language-html",metastring:"{10}","{10}":!0},'...\nexport const HomeTemplate = html<Home>`\n<div class="split-layout">\n    <div class="top-layout">\n        <entity-management\n          resourceName="ALL_TRADES"\n          title = "Trades"\n          entityLabel="Trades"\n          createEvent = "EVENT_TRADE_INSERT"\n          deleteEvent = "EVENT_TRADE_CANCELLED"\n          :columns=${x => x.columns}\n        ></entity-management>\n    ...\n    </div>\n</div>\n`;\n'))),(0,d.kt)("p",null,"Remember to run ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#5-build-process"},"build")," and ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#deploying-the-alpha-product"},"deploy")," tasks after the changes, and test it directly in the UI."),(0,d.kt)("h2",{id:"adding-logic-to-the-event-handler"},"Adding logic to the Event Handler"),(0,d.kt)("p",null,"We are going to change the code in the Event Handler so that:"),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},"it checks if the counterparty exists in the database (by checking COUNTERPARTY_ID field)"),(0,d.kt)("li",{parentName:"ul"},"it checks if the instrument exists in the database (by checking INSTRUMENT_ID field)"),(0,d.kt)("li",{parentName:"ul"},"it is able to modify records with the same verification on counterparty and instrument")),(0,d.kt)("h3",{id:"add-the-validation-code"},"Add the validation code"),(0,d.kt)("p",null,"Go to the ",(0,d.kt)("strong",{parentName:"p"},"alpha-eventhandler.kts")," file for the Event Handler. "),(0,d.kt)("p",null,"Add the verification by inserting an ",(0,d.kt)("strong",{parentName:"p"},"verify")," inside the ",(0,d.kt)("strong",{parentName:"p"},"onValidate")," block, before the ",(0,d.kt)("strong",{parentName:"p"},"onCommit")," block in TRADE_INSERT. We can see this below, with separate lines checking the Counterparty ID and the Instrument ID exist in the database. The new block ends by sending an ",(0,d.kt)("strong",{parentName:"p"},"ack()"),"."),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{2-9}","{2-9}":!0},'eventHandler<Trade>(name = "TRADE_INSERT") {\n    onValidate { event ->\n        val message = event.details\n        verify {\n            entityDb hasEntry Counterparty.ById(message.counterpartyId.toString())\n            entityDb hasEntry Instrument.byId(message.instrumentId.toString())\n        }\n        ack()\n    }\n    onCommit { event ->\n        val trade = event.details\n        trade.enteredBy = event.userName\n        stateMachine.insert(trade)\n        ack()\n    }\n}\n')),(0,d.kt)("admonition",{title:"verify function",type:"info"},(0,d.kt)("p",{parentName:"admonition"},"The ",(0,d.kt)("inlineCode",{parentName:"p"},"verify")," block you see above is part of the validation helper provided by the Platform to make it easier to verify conditions against the database. Outside of the ",(0,d.kt)("inlineCode",{parentName:"p"},"verify")," block, you can write any Kotlin code to validate whatever you want to.")),(0,d.kt)("h3",{id:"exercise-42-adding-onvalidate-to-event-handlers"},"Exercise 4.2: adding onValidate to event handlers"),(0,d.kt)("admonition",{title:"ESTIMATED TIME",type:"info"},(0,d.kt)("p",{parentName:"admonition"},"20 mins")),(0,d.kt)("p",null,"Add the same verification ",(0,d.kt)("inlineCode",{parentName:"p"},"onValidate")," as in TRADE_INSERT to the TRADE_MODIFY event handler."),(0,d.kt)("p",null,"Implement and test the back end with Console or Postman. To do that, see the ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day2/#api-testing-with-auto-generated-rest-endpoints"},"Day 2 example"),". Basically, you should create a POST request using the URL ",(0,d.kt)("em",{parentName:"p"},"http://localhost/gwf/EVENT_TRADE_MODIFY"),", as well as setting the header accordingly (header with SOURCE_REF and SESSION_AUTH_TOKEN). "),(0,d.kt)("h2",{id:"auditing"},"Auditing\u200b"),(0,d.kt)("p",null,"We want to be able to track the changes made to the various trades on the TRADE table, such that we could see the times and modifications made in the history of the trade. So, we are going to add basic auditing to the TRADE table in order to keep a record of the changing states of the trades."),(0,d.kt)("p",null,"This can be useful for historical purposes, if you need to at a later date be able to produce an accurate course of events."),(0,d.kt)("h3",{id:"adding-basic-auditing"},"Adding basic auditing"),(0,d.kt)("h4",{id:"adding-audit-to-table-dictionary"},"Adding audit to table dictionary"),(0,d.kt)("p",null,"The first step to add basic auditing is to change the relevant table dictionary. In this instance, we will be making changes to the ",(0,d.kt)("strong",{parentName:"p"},"alpha-tables-dictionary.kts"),", in order to add the parameter ",(0,d.kt)("inlineCode",{parentName:"p"},"audit = details()")," to the table definition. It should resemble the following:"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{1}","{1}":!0},'table (name = "TRADE", id = 2000, audit = details(id = 2100, sequence = "TR")) {\n    sequence(TRADE_ID, "TR")\n    COUNTERPARTY_ID \n    INSTRUMENT_ID not null\n    QUANTITY\n    PRICE not null\n    SYMBOL\n    DIRECTION\n    TRADE_DATE\n    ENTERED_BY\n    TRADE_STATUS\n\n    primaryKey {\n        TRADE_ID\n    }\n}\n')),(0,d.kt)("p",null,"The id parameter indicates the id of the newly created audit table, and will need to be different from any other table id."),(0,d.kt)("p",null,"As we are using the GPAL event handlers, this is sufficient to enable auditing on this table. A new table is created by the name of the original table, with the ",(0,d.kt)("strong",{parentName:"p"},"_AUDIT")," suffix added to the end. In this instance that would be the ",(0,d.kt)("strong",{parentName:"p"},"TRADE_AUDIT")," table."),(0,d.kt)("h4",{id:"updating-the-state-machine-to-use-auditing"},"Updating the state machine to use auditing"),(0,d.kt)("p",null,"Next you need to extend the insert, and modify methods in the ",(0,d.kt)("strong",{parentName:"p"},"TradeStateMachine.kt")," file. Specifically, each method must be have a second option so that the method signature uses the ",(0,d.kt)("strong",{parentName:"p"},"AsyncMultiEntityReadWriteGenericSupport")," parameter and the ",(0,d.kt)("inlineCode",{parentName:"p"},"internalState.withTransaction(transaction) { }")," code block.  For example:"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{2,5,10,12,20,23}","{2,5,10,12,20,23}":!0},"    suspend fun insert(\n        transaction: AsyncMultiEntityReadWriteGenericSupport,\n        trade: Trade,\n    ): Transition<Trade, TradeStatus, TradeEffect> =\n        internalState.withTransaction(transaction) {\n            create(trade)\n        }\n\n    suspend fun modify(\n        transaction: AsyncMultiEntityReadWriteGenericSupport,\n        tradeId: String, modify: suspend (Trade) -> Unit\n    ): Transition<Trade, TradeStatus, TradeEffect>? =\n        internalState.withTransaction(transaction) {\n            update(Trade.ById(tradeId)) {\n                    trade, _ -> modify(trade)\n            }\n        }\n\n    suspend fun modify(\n        transaction: AsyncMultiEntityReadWriteGenericSupport,\n        trade: Trade\n    ): Transition<Trade, TradeStatus, TradeEffect>? =\n        internalState.withTransaction(transaction) {\n            update(trade)\n        }\n")),(0,d.kt)("h4",{id:"update-the-event-handlers-to-use-auditing"},"Update the Event Handlers to use auditing"),(0,d.kt)("p",null,"Now you must update the ",(0,d.kt)("strong",{parentName:"p"},"alpha-eventhandler.kts")," in order to pass the ",(0,d.kt)("inlineCode",{parentName:"p"},"entityDb")," object into the updated methods of the state machine, as the ",(0,d.kt)("strong",{parentName:"p"},"syncMultiEntityReadWriteGenericSupport")," parameter. This should resemble the example below:"),(0,d.kt)("pre",null,(0,d.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{12,19,26,35}","{12,19,26,35}":!0},'    eventHandler<Trade>(name = "TRADE_INSERT") {\n        onValidate { event ->\n            val message = event.details\n            verify {\n                entityDb hasEntry Counterparty.ById(message.counterpartyId)\n                entityDb hasEntry Instrument.ById(message.instrumentId)\n            }\n            ack()\n        }\n        onCommit { event ->\n            val trade = event.details\n            stateMachine.insert(entityDb, trade)\n            ack()\n        }\n    }\n    eventHandler<Trade>(name = "TRADE_MODIFY") {\n        onCommit { event ->\n            val trade = event.details\n            stateMachine.modify(entityDb, trade)\n            ack()\n        }\n    }\n    eventHandler<TradeCancelled>(name = "TRADE_CANCELLED") {\n        onCommit { event ->\n            val message = event.details\n            stateMachine.modify(entityDb, message.tradeId) { trade ->\n                trade.tradeStatus = TradeStatus.CANCELLED\n            }\n            ack()\n        }\n    }\n    eventHandler<TradeAllocated>(name = "TRADE_ALLOCATED") {\n        onCommit { event ->\n            val message = event.details\n            stateMachine.modify(entityDb, message.tradeId) { trade ->\n                trade.tradeStatus = TradeStatus.ALLOCATED\n            }\n            ack()\n        }\n    }\n')),(0,d.kt)("p",null,"Run the ","[dao]",", ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#5-build-process"},"build")," and ",(0,d.kt)("a",{parentName:"p",href:"/getting-started/developer-training/training-content-day1/#deploying-the-alpha-product"},"deploy")," tasks."),(0,d.kt)("h3",{id:"exercise-43-testing-an-audited-table"},"Exercise 4.3: testing an audited table"),(0,d.kt)("admonition",{title:"ESTIMATED TIME",type:"info"},(0,d.kt)("p",{parentName:"admonition"},"20 mins")),(0,d.kt)("p",null,"Try to insert or modify a TRADE and see the auditing happening accordingly. You can use DbMon or Genesis Console to check the data in table TRADE_AUDIT."))}h.isMDXComponent=!0},7313:function(e,t){t.Z="data:image/png;base64,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948AjLV///6lS5dee+21klt//Qojp8JZWVnLly8/ePCgfwVcMDKcHOfOnZO3hzI7Bw0a5E/YMDKh77777g0bNpSVlflXAADznD59esuWLXPmzLn44ov99StMenr63LlzP/jggzNnzvhXwAUjw0lTVVX1zjvvXHPNNa1bt/bnbJB82a1bt4ULFx47dswfCgCmqqioWLlyZe/evaOXsv79+69evbqystIfimQgw8m0Z8+e2bNn9+vX76KLLgpNXGnwuHHjXn75ZTlj9scBgKlqa2vljGLKlCk9evRo06aNt5SlpaX17Nnzjjvu2Lx5sz8OSUKGk+nIkSN/+tOfpk2b1rVr19DcveKKK5YuXbpt2zZ+OAuA+STDe/fu9X43qV27dt5S1r59+5tuuul3v/vd559/7o9DkpDhZKqurj5w4MCyZctCP6jVtm3bW265ZcuWLeXl5f4gADBbZWXlrl27Zs2aFfpgr2PHjg899NCePXv4RDrpyHCSnTt37tVXXx01apS8i2zdunX37t3nzJlz+PBhfzcA2OD06dO//vWv+/Tp06ZNm7S0tAEDBjz77LP800MqkOEkkxPijz/+eO7cuUOGDOnWrdttt922Zs2akydP+rsBwAZS3PXr18+YMePSSy+97LLL7r///jfeeIMfcFEhfob5PdfmOnXq1ObNm3Nzc2+66aaVK1f+73//4598axamHFRgXjWLPFylpaWvvfbaD37wg6lTp65bt66srIzHsFkSfLgSOhuWihw7duzgwYMHEI88SiUlJcXFxb/61a9mz579j3/8Q7786quv/N2IzXvo5D04L3UoUllZKWlhKUuE93r86KOPHn300Z/97GeffPKJfMlDlwh5lOQtS1VVVTIzLBP3mWeeufPOO3/4wx/egXjkgZI/R40aNXDgwEmTJt11113yXtLbhSbI7Hr44Yffe+89PjyACrImfvrpp/PmzfMmmzfrEIusWrJ2ZWdnDx06dPjw4VOmTPFWNjQhNK8WLVq0b9++ZGZ4z549kydPbteuXb9+/b797W9fjiaNGDFC/rziiiu+853vjBw50vsSTfAepU6dOqWnp7/44ot8/wkqyJr4xhtvDBs2rGPHjpmZmTLr/PmHxshL0lu7ZB1jKUuQ9HHw4MHSSln/t2zZkswMf/bZZxMmTJCJu2rVqvfff//dd9/djCbJQ/Sf//xH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"}}]);