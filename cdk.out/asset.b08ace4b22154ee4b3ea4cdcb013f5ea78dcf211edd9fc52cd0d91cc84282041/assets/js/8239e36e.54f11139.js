"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[60924],{42682:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return E}});var a=n(87462),s=n(63366),r=(n(67294),n(3905)),o=(n(61839),["components"]),i={title:"Pipeline setup - Oracle DB",sidebar_label:"Oracle DB",id:"oracle",sidebar_position:4,keywords:["operations","pipeline","setup","oracle db"],tags:["operations","pipeline","setup","introduction","oracle db"]},l=void 0,p={unversionedId:"operations/pipeline-setup/oracle",id:"operations/pipeline-setup/oracle",title:"Pipeline setup - Oracle DB",description:"CDC capabilities are only supported by Oracle Enterprise edition. Ensure that your Oracle instance is the Enterprise version before continuing.",source:"@site/docs/05_operations/09_pipeline-setup/oracle.md",sourceDirName:"05_operations/09_pipeline-setup",slug:"/operations/pipeline-setup/oracle",permalink:"/next/operations/pipeline-setup/oracle",draft:!1,tags:[{label:"operations",permalink:"/next/tags/operations"},{label:"pipeline",permalink:"/next/tags/pipeline"},{label:"setup",permalink:"/next/tags/setup"},{label:"introduction",permalink:"/next/tags/introduction"},{label:"oracle db",permalink:"/next/tags/oracle-db"}],version:"current",sidebarPosition:4,frontMatter:{title:"Pipeline setup - Oracle DB",sidebar_label:"Oracle DB",id:"oracle",sidebar_position:4,keywords:["operations","pipeline","setup","oracle db"],tags:["operations","pipeline","setup","introduction","oracle db"]},sidebar:"operationsSidebar",previous:{title:"Microsoft SQL Server",permalink:"/next/operations/pipeline-setup/mssql"},next:{title:"Introduction",permalink:"/next/operations/release-notes/introduction"}},d={},E=[{value:"Enable CDC on Oracle",id:"enable-cdc-on-oracle",level:2},{value:"Connecting Debezium",id:"connecting-debezium",level:2},{value:"Connecting to the database",id:"connecting-to-the-database",level:2}],c={toc:E};function u(e){var t=e.components,n=(0,s.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"CDC capabilities are only supported by Oracle Enterprise edition. Ensure that your Oracle instance is the Enterprise version before continuing.")),(0,r.kt)("h2",{id:"enable-cdc-on-oracle"},"Enable CDC on Oracle"),(0,r.kt)("p",null,"Run the following script in the machine running the database, substituting ",(0,r.kt)("inlineCode",{parentName:"p"},"top_secret")," for the ",(0,r.kt)("inlineCode",{parentName:"p"},"sys")," password set up on the database. You can also substitute ",(0,r.kt)("inlineCode",{parentName:"p"},"c##dbzuser")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"dbz")," for the username and password you want for the LogMiner username and password you want."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/sh\n\n# This file is based on docs at https://debezium.io/documentation/reference/stable/connectors/oracle.html#setting-up-oracle and the linked Debezium Vagrant Box for Oracle DB GitHub repository.\n\n# Set archive log mode and enable GG replication\n\nmkdir /opt/oracle/oradata/recovery_area\nORACLE_SID=ORCLCDB\nexport ORACLE_SID\nsqlplus /nolog <<- EOF\n    CONNECT sys/top_secret AS SYSDBA\n    alter system set db_recovery_file_dest_size = 10G;\n    alter system set db_recovery_file_dest = '/opt/oracle/oradata/recovery_area' scope=spfile;\n    shutdown immediate\n    startup mount\n    alter database archivelog;\n    alter database open;\n        -- Should show \"Database log mode: Archive Mode\"\n    archive log list\n    exit;\nEOF\n\n# Enable LogMiner required database features/settings\nsqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba <<- EOF\n  ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;\n  ALTER PROFILE DEFAULT LIMIT FAILED_LOGIN_ATTEMPTS UNLIMITED;\n  exit;\nEOF\n\n# Create Log Miner Tablespace and User\nsqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba <<- EOF\n  CREATE TABLESPACE LOGMINER_TBS DATAFILE '/opt/oracle/oradata/ORCLCDB/logminer_tbs.dbf' SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;\n  exit;\nEOF\n\nsqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba <<- EOF\n  CREATE TABLESPACE LOGMINER_TBS DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/logminer_tbs.dbf' SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;\n  exit;\nEOF\n\nsqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba <<- EOF\n  CREATE USER c##dbzuser IDENTIFIED BY dbz DEFAULT TABLESPACE LOGMINER_TBS QUOTA UNLIMITED ON LOGMINER_TBS CONTAINER=ALL;\n  GRANT CREATE SESSION TO c##dbzuser CONTAINER=ALL;\n  GRANT SET CONTAINER TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$DATABASE TO c##dbzuser CONTAINER=ALL;\n  GRANT FLASHBACK ANY TABLE TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ANY TABLE TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;\n  GRANT EXECUTE_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ANY TRANSACTION TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ANY DICTIONARY TO c##dbzuser CONTAINER=ALL;\n  GRANT LOGMINING TO c##dbzuser CONTAINER=ALL;\n  GRANT CREATE TABLE TO c##dbzuser CONTAINER=ALL;\n  GRANT LOCK ANY TABLE TO c##dbzuser CONTAINER=ALL;\n  GRANT CREATE SEQUENCE TO c##dbzuser CONTAINER=ALL;\n  GRANT EXECUTE ON DBMS_LOGMNR TO c##dbzuser CONTAINER=ALL;\n  GRANT EXECUTE ON DBMS_LOGMNR_D TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$LOGMNR_LOGS TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$LOGMNR_CONTENTS TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$LOGFILE TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$ARCHIVED_LOG TO c##dbzuser CONTAINER=ALL;\n  GRANT SELECT ON V_\\$ARCHIVE_DEST_STATUS TO c##dbzuser CONTAINER=ALL;\n  exit;\nEOF\n")),(0,r.kt)("p",null,"Create a database user with the following script, substituting your desired username and password for ",(0,r.kt)("inlineCode",{parentName:"p"},"genesis")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"test"),", and also the ",(0,r.kt)("inlineCode",{parentName:"p"},"sys")," password set up on the database for ",(0,r.kt)("inlineCode",{parentName:"p"},"top_secret"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/sh\n\n# Create Genesis database user\nsqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba <<- EOF\n  CREATE USER genesis IDENTIFIED BY test;\n  GRANT CONNECT TO genesis;\n  GRANT CREATE SESSION TO genesis;\n  GRANT ANY PRIVILEGE TO genesis;\n  GRANT CREATE TABLE TO genesis;\n  GRANT CREATE SEQUENCE to genesis;\n  GRANT UNLIMITED TABLESPACE TO genesis;\n  exit;\nEOF\n")),(0,r.kt)("h2",{id:"connecting-debezium"},"Connecting Debezium"),(0,r.kt)("p",null,"Here are some settings specific to setting up the Oracle Debezium connector."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Setting"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"databaseName"),(0,r.kt)("td",{parentName:"tr",align:null},"ORCLCDB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pdbName"),(0,r.kt)("td",{parentName:"tr",align:null},"ORCLPDB1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"username"),(0,r.kt)("td",{parentName:"tr",align:null},"c##dbzuser")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"password"),(0,r.kt)("td",{parentName:"tr",align:null},"dbz")))),(0,r.kt)("p",null,"If you set your LogMiner username and password to something different, substitute the values above for the ones you chose."),(0,r.kt)("h2",{id:"connecting-to-the-database"},"Connecting to the database"),(0,r.kt)("p",null,"Connect to the database using the username and password you chose above for the Genesis user. Also, connect to the PDB database, which is ",(0,r.kt)("inlineCode",{parentName:"p"},"ORCLPDB1")," by default."))}u.isMDXComponent=!0}}]);