"use strict";(self.webpackChunk_genesislcap_docs=self.webpackChunk_genesislcap_docs||[]).push([[55932],{24764:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return r},default:function(){return c},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return h}});var a=n(87462),i=n(63366),o=(n(67294),n(3905)),s=(n(61839),["components"]),l={title:"Go to the next level - Run the application (WSL/CentOS)",sidebar_label:"Run the application (WSL/CentOS)",id:"run-the-application-wsl",keywords:["getting started","quick start","next level","run the app","wsl","centos"],tags:["getting started","quick start","next level","run the app","wsl","centos"]},r=void 0,p={unversionedId:"getting-started/go-to-the-next-level/run-the-application-wsl",id:"version-2022.3/getting-started/go-to-the-next-level/run-the-application-wsl",title:"Go to the next level - Run the application (WSL/CentOS)",description:"The instructions on this page are for using WSL/CentOS. If you prefer to use Docker as your environment, there are separate instructions.",source:"@site/versioned_docs/version-2022.3/01_getting-started/03_go-to-the-next-level/17_run-the-application-wsl.md",sourceDirName:"01_getting-started/03_go-to-the-next-level",slug:"/getting-started/go-to-the-next-level/run-the-application-wsl",permalink:"/getting-started/go-to-the-next-level/run-the-application-wsl",draft:!1,tags:[{label:"getting started",permalink:"/tags/getting-started"},{label:"quick start",permalink:"/tags/quick-start"},{label:"next level",permalink:"/tags/next-level"},{label:"run the app",permalink:"/tags/run-the-app"},{label:"wsl",permalink:"/tags/wsl"},{label:"centos",permalink:"/tags/centos"}],version:"2022.3",sidebarPosition:17,frontMatter:{title:"Go to the next level - Run the application (WSL/CentOS)",sidebar_label:"Run the application (WSL/CentOS)",id:"run-the-application-wsl",keywords:["getting started","quick start","next level","run the app","wsl","centos"],tags:["getting started","quick start","next level","run the app","wsl","centos"]},sidebar:"learningSidebar",previous:{title:"Camel integrations",permalink:"/getting-started/go-to-the-next-level/camel"},next:{title:"Run the application (Docker)",permalink:"/getting-started/go-to-the-next-level/run-the-application-docker"}},u={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deploy the Genesis low-code platform",id:"deploy-the-genesis-low-code-platform",level:2},{value:"Set up the platform",id:"set-up-the-platform",level:3},{value:"Deploy the auth module",id:"deploy-the-auth-module",level:3},{value:"Install the site-specific configuration",id:"install-the-site-specific-configuration",level:3},{value:"Run GenesisInstall",id:"run-genesisinstall",level:3},{value:"Add a user",id:"add-a-user",level:3},{value:"Deploying the application",id:"deploying-the-application",level:2},{value:"Run the server commands",id:"run-the-server-commands",level:2},{value:"Testing the back end",id:"testing-the-back-end",level:2},{value:"Genesis Console",id:"genesis-console",level:3},{value:"Checking the insertion",id:"checking-the-insertion",level:4},{value:"Postman",id:"postman",level:3},{value:"Logging in",id:"logging-in",level:4},{value:"Checking the insertion",id:"checking-the-insertion-1",level:3},{value:"Connecting the back end and front end",id:"connecting-the-back-end-and-front-end",level:2}],d={toc:h};function c(e){var t=e.components,l=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The instructions on this page are for using WSL/CentOS. If you prefer to use Docker as your environment, there are ",(0,o.kt)("a",{parentName:"p",href:"/getting-started/go-to-the-next-level/run-the-application-docker/"},"separate instructions"),"."),(0,o.kt)("p",null,"The Genesis deploy plugin provides several tasks that help to set up the Genesis environment so that you can deploy a project to it. It can be used on Linux machines (local and over SSH) or Windows machines with WSL support."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"You should have a sub-module called ",(0,o.kt)("strong",{parentName:"p"},"positions-app-tutorial-deploy")," under ",(0,o.kt)("strong",{parentName:"p"},"../server/jvm"),"."),(0,o.kt)("p",null,"Ensure the ",(0,o.kt)("strong",{parentName:"p"},"build.gradle.kts")," in this sub-module has the following entry:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'plugins {\n    id("global.genesis.deploy") version "<your version>"\n}\n')),(0,o.kt)("p",null,"Ensure you have a WSL user, in this example it is ",(0,o.kt)("inlineCode",{parentName:"p"},"genesis"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none",metastring:'title="CentOS"',title:'"CentOS"'},"useradd genesis\nusermod -aG wheel genesis\n")),(0,o.kt)("admonition",{title:"edit gradle.properties",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Ensure the ",(0,o.kt)("strong",{parentName:"p"},"gradle.properties")," file from the ",(0,o.kt)("strong",{parentName:"p"},"server/jvm folder")," is properly set with the following entries:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-properties"},"genesis-home=/home/genesis/run/\nwsl-distro=CentOS7\nwsl-user=genesis\n")),(0,o.kt)("table",{parentName:"admonition"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Entry"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"genesis-home")),(0,o.kt)("td",{parentName:"tr",align:null},"This is a mandatory property that is a path on the WSL distribution.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"wsl-distro")),(0,o.kt)("td",{parentName:"tr",align:null},"This is a mandatory property that is the name of the WSL distribution.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"wsl-user")),(0,o.kt)("td",{parentName:"tr",align:null},"This is an optional property. If omitted, the default WSL user will be used."))))),(0,o.kt)("p",null,"If you haven't already, you should have a project artifact built using the following gradle task ",(0,o.kt)("strong",{parentName:"p"},"genesisproduct-positions-app-tutorial"),"/",(0,o.kt)("strong",{parentName:"p"},"Tasks"),"/",(0,o.kt)("strong",{parentName:"p"},"build"),"/",(0,o.kt)("strong",{parentName:"p"},"assemble"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(12193).Z,width:"421",height:"474"})),(0,o.kt)("p",null,"The following environment variables need to be set in your ",(0,o.kt)("inlineCode",{parentName:"p"},".bashrc")," as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"export GENESIS_HOME=$HOME/run/\n[ -f $GENESIS_HOME/genesis/util/setup.sh ] && source $GENESIS_HOME/genesis/util/setup.sh\n")),(0,o.kt)("p",null,"Finally, you need to have a FoundationDB database running."),(0,o.kt)("h2",{id:"deploy-the-genesis-low-code-platform"},"Deploy the Genesis low-code platform"),(0,o.kt)("p",null,"Now we are going to install the platform (i.e. Genesis distribution) on the server and then install the back end of our application on the same server. This is all done using the Genesis deploy plugin, which comes with several tasks grouped under ",(0,o.kt)("inlineCode",{parentName:"p"},"genesisdeploy")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"genesissetup"),"."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"All the following sections are one-time operations. If you have already followed this tutorial previously, they are not necessary. Skip to Deploying the application.")),(0,o.kt)("h3",{id:"set-up-the-platform"},"Set up the platform"),(0,o.kt)("p",null,"We will run ",(0,o.kt)("inlineCode",{parentName:"p"},"setupEnvironment")," under ",(0,o.kt)("inlineCode",{parentName:"p"},"genesissetup")," first (we only need to run it once) to set up the platform on the server. This task executes ",(0,o.kt)("inlineCode",{parentName:"p"},"install-genesis-distribution")," (copies and unzips the Genesis distribution specified as a dependency) and then configures the installed distribution:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:setupEnvironment #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(49532).Z,width:"421",height:"474"})),(0,o.kt)("p",null,"After this command is complete, we will have a basic Genesis server running."),(0,o.kt)("h3",{id:"deploy-the-auth-module"},"Deploy the auth module"),(0,o.kt)("p",null,"As our application requires authentication, we have to install the Genesis Auth module:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:install-auth-distribution.zip #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(55214).Z,width:"421",height:"474"})),(0,o.kt)("h3",{id:"install-the-site-specific-configuration"},"Install the site-specific configuration"),(0,o.kt)("p",null,"As our application will use the site-specific folder to override the standard definitions, we have to run this task:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:install-positions-app-tutorial-site-specific-1.0.0-SNAPSHOT-bin.zip-distribution.zip #On the IntelliJ terminal\n")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(25429).Z,width:"421",height:"474"})),(0,o.kt)("h3",{id:"run-genesisinstall"},"Run GenesisInstall"),(0,o.kt)("p",null,"Run genesisInstall to create the Genesis scripts."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:genesisInstall #On the IntelliJ terminal\n")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(19956).Z,width:"401",height:"505"})),(0,o.kt)("h3",{id:"add-a-user"},"Add a user"),(0,o.kt)("p",null,"Next, let's create a user."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The following details will be your login details:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Username: JaneDee"),(0,o.kt)("li",{parentName:"ul"},"Password: beONneON*74 (This is encrypted in the USER.csv file.)"))),(0,o.kt)("p",null,"Run the task ",(0,o.kt)("inlineCode",{parentName:"p"},"loadInitialData"),". This adds the data to a file called USER.csv to be imported into the ",(0,o.kt)("inlineCode",{parentName:"p"},"USER")," table in your\ndatabase. The ",(0,o.kt)("inlineCode",{parentName:"p"},"USER")," table, among other users and permissioning tables, is defined by the Genesis Auth module that we installed previously. "),(0,o.kt)("p",null,"To run the task, call:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:loadInitialData #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(30703).Z,width:"421",height:"474"})),(0,o.kt)("p",null,"Now we are going to use Genesis ",(0,o.kt)("inlineCode",{parentName:"p"},"DbMon")," to run some queries on the database."),(0,o.kt)("admonition",{title:"DbMon",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"DbMon is the Genesis database client. It provides a unified interface to the underlying database and hides the details about the database vendor.")),(0,o.kt)("p",null,"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"DbMon")," to check that the user has been created:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-position-app-tutorial:positions-app-tutorial-deploy:DbMon #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(72421).Z,width:"421",height:"474"})),(0,o.kt)("p",null,"Once you are inside the console, type ",(0,o.kt)("inlineCode",{parentName:"p"},"table USER")," and then ",(0,o.kt)("inlineCode",{parentName:"p"},"search 1"),". If imported correctly, the user JaneDee should be listed:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"DbMon>table USER\nDbMon:USER>search 1\n==================================\nUSER\n==================================\nField Name                               Value                                    Type                \n===========================================================================================\n...\nUSER_NAME                                JaneDee                                  STRING              \n-------------------------------------------------------------------------------------------\n-------------------------------------------------------------------------------------------\nTotal Results:  1\nDbMon:USER>\n")),(0,o.kt)("h2",{id:"deploying-the-application"},"Deploying the application"),(0,o.kt)("p",null,"Now we have to deploy our application, the positions-app-tutorial product:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:deploy-genesisproduct-positions-app-tutorial.zip #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(65917).Z,width:"421",height:"474"})),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"This will take the last built distribution. It does not run a project build as part of the task. Make sure you have already built the project before deploying it.")),(0,o.kt)("h2",{id:"run-the-server-commands"},"Run the server commands"),(0,o.kt)("admonition",{title:"Can I run server commands from the command line rather than gradle tasks?",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Yes. Here, we've been running server commands through the gradle tasks. But alternatively, you can run server commands directly from a command line. "),(0,o.kt)("p",{parentName:"admonition"},"Assuming you are using the provided 'TrainingCentOS' WSL distribution, open PowerShell (or Windows Command Prompt). Access your WSL instance 'TrainingCentOS' and switch to user 'genesis' to have access to the Genesis commands:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"wsl -d TrainingCentOS\nsu genesis\nDbMon\n")),(0,o.kt)("p",{parentName:"admonition"},"Try it now!")),(0,o.kt)("p",null,"Now, let's run the Genesis command ",(0,o.kt)("inlineCode",{parentName:"p"},"mon")," to see if all processes are up and running on the server:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :genesisproduct-positions-app-tutorial:positions-app-tutorial-deploy:mon #On the IntelliJ terminal\n")),(0,o.kt)("p",null,"or from the dropdown menu:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(46331).Z,width:"421",height:"474"})),(0,o.kt)("p",null,"We should see something like this"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"PID     Process Name                  Port        Status         CPU       Memory    Message\n===============================================================================================\n426     GENESIS_AUTH_CONSOLIDATOR     8005        STANDBY        36.30     1.30\n350     GENESIS_AUTH_DATASERVER       8002        RUNNING        56.70     1.70\n334     GENESIS_AUTH_MANAGER          8001        RUNNING        61.50     1.70\n368     GENESIS_AUTH_PERMS            8003        RUNNING        65.70     1.90\n403     GENESIS_AUTH_REQUEST_SERVER   8004        RUNNING        56.80     1.60\n490     GENESIS_CLUSTER               9000        RUNNING        84.30     2.50\n570     GENESIS_ROUTER                9017        RUNNING        54.70     2.00\n534     GENESIS_WEBMON                9011        RUNNING        51.30     2.50\n===============================================================================================\n664     POSITIONS_APP_TUTORIAL_DATASERVER              11000       RUNNING        58.10     1.50\n703     POSITIONS_APP_TUTORIAL_EVENT_HANDLER           11001       RUNNING        71.30     2.20\n")),(0,o.kt)("h2",{id:"testing-the-back-end"},"Testing the back end"),(0,o.kt)("p",null,"There are multiple ways you can test the back end of your application. It's important to note that most resources, such as Event Handlers and Data Servers, are automatically exposed as HTTP endpoints by the platform - without any additional code. This enables you to test those resources from HTTP clients, such as Postman. Alternatively, you can use Genesis Console, which gives you a simple way of testing components from a nice web UI."),(0,o.kt)("h3",{id:"genesis-console"},"Genesis Console"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In your browser, go to ",(0,o.kt)("a",{parentName:"li",href:"http://genesislcap.com/console/console-next2/"},"http://genesislcap.com/console/console-next2/"),"."),(0,o.kt)("li",{parentName:"ol"},"Enter the IP address of your server, in this case localhost."),(0,o.kt)("li",{parentName:"ol"},"Log in with your user name and password as defined previously. This starts Genesis Console, and you will see a list of tabs along the top of the screen."),(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"RESOURCES")," tab."),(0,o.kt)("li",{parentName:"ol"},"Filter the ",(0,o.kt)("strong",{parentName:"li"},"Resource type")," to show only Event Handlers.")),(0,o.kt)("p",null,"For example:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(51744).Z,width:"1103",height:"532"})),(0,o.kt)("p",null,"As well as the Event Handlers that you have defined yourself, you will also see other Event Handlers that have been generated automatically by the platform: anything that is a ",(0,o.kt)("strong",{parentName:"p"},"GENESIS_CLUSTER")," service, for example."),(0,o.kt)("p",null,"If you click on any Event Handler in the list, the fields relevant to the event are displayed to the right."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(87733).Z,width:"1678",height:"674"})),(0,o.kt)("p",null,"Now you need to pick the Event Handler you want to test. So, let's look up EVENT_TRADE_INSERT."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Find the Event Handler in the list, then click on the arrow beside it. On the right, this displays the relevant input fields for the event. Some are mandatory, while others are optional - depending on how the Event Handler was set up.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(20312).Z,width:"1859",height:"668"})),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Enter the details of the new trade in the fields then click on ",(0,o.kt)("strong",{parentName:"li"},"COMMIT"),":")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(67689).Z,width:"1865",height:"652"})),(0,o.kt)("p",null,"If the Event Handler is working correctly, you will receive an ",(0,o.kt)("strong",{parentName:"p"},"ACK"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(36800).Z,width:"694",height:"116"})),(0,o.kt)("h4",{id:"checking-the-insertion"},"Checking the insertion"),(0,o.kt)("p",null,"You can go on to check the ",(0,o.kt)("inlineCode",{parentName:"p"},"TRADE")," table to see if your insert is there."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Filter the list of services to show only Data Servers (these are the components that distribute the data).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Search for the relevant resource - in our case ",(0,o.kt)("inlineCode",{parentName:"p"},"TRADE"),"."))),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(25012).Z,width:"1819",height:"316"})),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Click on the arrow beside the relevant resource. You should now see the new trade in the list displayed on the right.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(4363).Z,width:"1869",height:"636"})),(0,o.kt)("p",null,"Alternatively you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"DbMon")," similar to the way the ",(0,o.kt)("inlineCode",{parentName:"p"},"USER")," table was queried"),(0,o.kt)("h3",{id:"postman"},"Postman"),(0,o.kt)("p",null,"As an alternative to Genesis Console, take this opportunity to test your work with an HTTP client, such as Postman or Insomnia."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://go.postman.co/home/"},"Postman web version")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.postman.com/downloads/"},"Postman App")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://insomnia.rest/download"},"Insomnia App"))),(0,o.kt)("admonition",{title:"REST endpoints",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"When we test our resources using an HTTP client as described here, we're taking advantage of the ",(0,o.kt)("a",{parentName:"p",href:"/server/integration/rest-endpoints/introduction/"},"REST endpoints")," provided by the platform. Without any additional code from you, it automatically exposes all configured resources, such as Data Server queries and Event Handlers, as HTTP endpoints via the GENESIS_ROUTER service. This also enables you to do some API testing automation for all your back-end components.")),(0,o.kt)("h4",{id:"logging-in"},"Logging in"),(0,o.kt)("p",null,"Whichever client you are using, you need to log in before you can send test requests to the server. This involves two things:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"providing a SOURCE_REF - this can be any string that identifies all your activity while you are logged in"),(0,o.kt)("li",{parentName:"ul"},"retrieving a SESSION_AUTH_TOKEN, which you can copy and use to authorise all your test requests")),(0,o.kt)("p",null,"For example, to log in using Postman:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create a new query in Postman."),(0,o.kt)("li",{parentName:"ol"},"In front of the url, set the call to ",(0,o.kt)("strong",{parentName:"li"},"POST"),"."),(0,o.kt)("li",{parentName:"ol"},"For the url, you need to supply your server instance, then ",(0,o.kt)("strong",{parentName:"li"},":9064")," (which sends you to the application's Router), and then ",(0,o.kt)("strong",{parentName:"li"},"event-login-auth"),". For example:\n",(0,o.kt)("strong",{parentName:"li"},"http://localhost:9064/event-login-auth")),(0,o.kt)("li",{parentName:"ol"},"Set the Body to JSON and insert the message below (substituting your correct user name and password) in the main body. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "MESSAGE_TYPE": "EVENT_LOGIN_AUTH",\n    "SERVICE_NAME": "AUTH_MANAGER",\n    "DETAILS": {\n        "USER_NAME": "JaneDee",\n        "PASSWORD": "beONneON*74"\n    }\n}\n')),(0,o.kt)("ol",{start:5},(0,o.kt)("li",{parentName:"ol"},"Click to view the header, then insert SOURCE_REF in the header. For this field, you can use any string that identifies you (in effect). In the example below, we have set SOURCE_REF to ",(0,o.kt)("em",{parentName:"li"},"BAUDOIN1")," (for no particular reason).")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(97547).Z,width:"1778",height:"711"})),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},"When you have done this, click on the ",(0,o.kt)("strong",{parentName:"li"},"Send")," button.")),(0,o.kt)("p",null,"This returns a set of details at the bottom of the Postman window, where you can copy the ",(0,o.kt)("inlineCode",{parentName:"p"},"SESSION_AUTH_TOKEN"),", which you will need for your test requests."),(0,o.kt)("p",null,"Once you have the SESSION_AUTH_TOKEN, keep a copy that you can paste into each request as you make your test call."),(0,o.kt)("p",null,"In the example below, we use Postman as the client API. We are going to test the ",(0,o.kt)("inlineCode",{parentName:"p"},"EVENT_COUNTERPARTY_INSERT")," Event Handler by adding a new counterparty."),(0,o.kt)("p",null,"In front of the url, set the call to ",(0,o.kt)("strong",{parentName:"p"},"POST"),"."),(0,o.kt)("p",null,"The url consists of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the address or hostname of the server"),(0,o.kt)("li",{parentName:"ul"},"if necessary, some extra routing; in this case ",(0,o.kt)("strong",{parentName:"li"},"gwf")," uses a proxy to access the server"),(0,o.kt)("li",{parentName:"ul"},"the name of the Event Handler")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"http://localhost/gwf/EVENT_COUNTERPARTY_INSERT\n")),(0,o.kt)("p",null,"After the url, you need to move to the body. Set the body to ",(0,o.kt)("strong",{parentName:"p"},"JSON"),". Then, in the body, insert the details of the fields for the new counterparty, as shown below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "DETAILS": {\n      "SOURCE_REF": "BAUDOIN1",\n      "COUNTERPARTY_LEI": "Thomas S Eiselberg",\n      "COUNTERPARTY_ID": "EISELBERG",\n      "ENABLED": 1,\n      "NAME": "Thomas S Eiselberg GmbH"\n    }\n}\n')),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(81003).Z,width:"1796",height:"522"})),(0,o.kt)("p",null,"In the header, you need to supply:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"a SOURCE_REF (always), which identifies you; you can use any string value that suits you"),(0,o.kt)("li",{parentName:"ul"},"the SESSION_AUTH_TOKEN that permissions you to access the server")),(0,o.kt)("p",null,"When you have all these elements in place, click on ",(0,o.kt)("strong",{parentName:"p"},"Send")," to make the call. If the event is a success, you will receive an ",(0,o.kt)("strong",{parentName:"p"},"ACK")," message."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(90170).Z,width:"1771",height:"611"})),(0,o.kt)("h3",{id:"checking-the-insertion-1"},"Checking the insertion"),(0,o.kt)("p",null,"Now you can check that the new counterparty you inserted is in the correct table of the database. The resource you need to check is the Request Server called ALL_COUNTERPARTIES."),(0,o.kt)("p",null,"In front of the url, set the call to ",(0,o.kt)("strong",{parentName:"p"},"POST"),"."),(0,o.kt)("p",null,"The url consists of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the address or hostname of the server"),(0,o.kt)("li",{parentName:"ul"},"if necessary, some extra routing; in this case ",(0,o.kt)("strong",{parentName:"li"},"gwf")," uses a proxy to access the server"),(0,o.kt)("li",{parentName:"ul"},"the name of the request server")),(0,o.kt)("p",null,"Set the body to ",(0,o.kt)("strong",{parentName:"p"},"JSON"),". There is no need for any information in the body. Simply insert a pair of curly brackets ",(0,o.kt)("inlineCode",{parentName:"p"},"{}"),". "),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(51435).Z,width:"1781",height:"336"})),(0,o.kt)("p",null,"In the header, you need to supply:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"a SOURCE_REF (always), which identifies you; you can use any string value that suits you"),(0,o.kt)("li",{parentName:"ul"},"the SESSION_AUTH_TOKEN that permissions you to access the server")),(0,o.kt)("p",null,"When you have this in place, click on ",(0,o.kt)("strong",{parentName:"p"},"Send")," to make the call. You can see that the fields for the instruments have been returned on the right of the screen."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(94007).Z,width:"1770",height:"705"})),(0,o.kt)("h2",{id:"connecting-the-back-end-and-front-end"},"Connecting the back end and front end"),(0,o.kt)("p",null,"In this step, we shall configure an nginx server working as a reverse proxy. Make sure you have your artifcatory credentials available."),(0,o.kt)("p",null,"In your CentOS terminal, enter following three commands:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Enter your artifactory credentials:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker login genesisglobal-docker-internal.jfrog.io\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Pull the latest version of the Genesis software:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker pull genesisglobal-docker-internal.jfrog.io/genesis-console-proxy:latest\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Finally, run the following command:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -it --rm -d -p 80:80 -p 443:443 --name genesis-console-proxy --add-host localnode:$(hostname -I) genesisglobal-docker-internal.jfrog.io/genesis-console-proxy\n")))}c.isMDXComponent=!0},12193:function(e,t,n){t.Z=n.p+"assets/images/assemble-server-positions-c3048c8150923c0a120f17fee610c4d7.png"},65917:function(e,t,n){t.Z=n.p+"assets/images/deploy-alpha-product-positions-55fc4346056d8b0e8802ab05232e89aa.png"},19956:function(e,t,n){t.Z=n.p+"assets/images/genesis-install-6a685a293df82b5bfdb931e46c5fc2f1.png"},55214:function(e,t,n){t.Z=n.p+"assets/images/install-auth-positions-032d9238bf205d0a37687522fd1c7443.png"},25429:function(e,t,n){t.Z=n.p+"assets/images/install-site-specific-positions-c109ce640b9ac6c4209aa492c344dffc.png"},30703:function(e,t,n){t.Z=n.p+"assets/images/load-initial-data-positions-1a12ae9cab9e2ef5698429573b59fa75.png"},49532:function(e,t,n){t.Z=n.p+"assets/images/setup-environment-positions-5dafb5e35e13eea512fa06a3e963ad57.png"},4363:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-confirm-trade-alpha-2-d3383961b7833e13714c7299be3d098d.png"},25012:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-confirm-trade-alpha-4ef948259250ea0d19bc2e193628fcc0.png"},87733:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-fields-alpha-7315f1fd174be066599e9c61314ff546.png"},51744:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-filter-alpha-15f6ab264210d27936ed86ac651a2024.png"},36800:function(e,t){t.Z="data:image/png;base64,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wIKIAAAALIgIAADAgogAAAAsiAgAAMCCiAAAACyICAAAwIKIAAAALIgIAADAgogAAAAsiAgAAMCCiAAAACyICAAAwKK2iLBz5x8BAMCvUaimL4mIAADAb0Kopi+ptogAAAB+I4gIAADAgogAAAAsiAgAAMCCiAAAACyICAAAwIKIAAAALIgIAADAgogAAAAsiAgAAMCCiAAAACyICAAAwIKIAAAALIgIAADAgogAAAAsiAgAAMCCiAAAACyICAAAwIKIAAAALIgIAADAgogAAAAsiAgAAMCi5ojQeO1M6/2wlsstkcimDTcHW++f2HIsvEvku6Oiz5tXWiORls23w/sK286obn3dLaLbtbbAvpH1ay+fEIfd3Cde23dXdIfnOta9U/Y8umF3xVtCX/u224m9+dHOwsW9909s+078itx31efe7l7rtayPnD78pjja7cPrOn2NAACsFjVHhM33xw8Ux/cVRCn1/OnmHvHWG1fOx4rjHbfb/f2FTXcvHShebJE5oHVHXux+yb+v8OYPqufpz98tineHW057+wrrfh4WjTtk457tD9y9LonPihXdH7/Z/rfAXpXUceTJv33l96G31l4+06neijlHFq/fvxtzMoE67fzn69xd9KkWzjcv9aEAAPxK1RcREpsr2qXd3a2ycJ5oXLSxotb6mYigOvsu9H0RwUd1fvfn1kDj87S3FMSRL3aIHPDg8Bv+t04fU/X+m+1nNpmWA+3bc6MyTFzbrlqCpx3vbhWHqjwlAABWkWWNCIEBA8flhLgod2r50hGhMz+8LzgUsTwR4cwJEQ7EYdX5n28+4L2lznk0Ouy1SAcOvy1yQ+6oGkjwnfbuNvm6ONp6WacHAABWp2WOCJEfBruCBV71/367WaCwdER49+f3N98XV/BezV6WiNB4WxxTZRcVWfbedJcafBAVUcB2Sm/0tKztC44i7N7T/ECeW+sV/0oFAABWofoiwsW93jrB0FJBVXHduQY9y5A72mDeVbW2OPxWYPde09mt+gdiciS/cGazutZfjojgO6vdMfnaPaXd8bfEj/e7g/1DdEQ4tUNml/F9dz+o6AAAwGpTX0QICdRvdb0+uvM7+VovYPRdsuuIEOKMSfir/vDgPlGM78ubCJYhIqixDbezmllwBjb6ju4V51BNRFBnq1Yynm+OhzoAALDa1BcRFp9oENSsf6eca/h98wNVUL2Jf2fE3u3sF6z6jbcv6in/F48I6pwvvf/AGbdQSxGd2RAzzhG4oTHMRAQZWVR2iclJh1AfAABWlRWICObegRONasVf8PaBGiJCZHdbiyzMiZa7LxYR9MLDSmY2pGVbTvxYOTDQviM32pk7pk5VnXbhlH6ggogsagFm+PkNAACsJisREdY33PxeDgDclbMMrZf9b9USEZwWVdHrjwh6sqNdPbnBpe9iMLMhlxNdcoQgvtY3MNBw8xuxlzPSEDxt76aG8PMVAABYNeqLCKHlimdar3m3MEjHjrab0j64KTAgr0fsQ8sV9cMZ7VVfX7K/QETQkx3uLRWO7050Fse7zMLD7eoeivFY4fvoz71brn0ezY2KD43lT20yUyQVySauRiYKic0sSgAArFL1RYQK4eV+evRe1OBYsF1HhDBT6e1V36SKOiOCDiuWpQbtO+Xjj9wEs33DzYQ4oHNKl969H1/X7nauiAjygYwJuSjhQa9/7AEAgFWj5ojwulKrDisEpzmqEHefhQAAwG/aqokILRuuxLdU2FD5b0oBAIAqrJqIAAAAlhMRAQAAWBARAACABREBAABYEBEAAIAFEQEAAFgQEQAAgAURAQAAWBARAACABREBAABYEBEAAIAFEQEAAFgQEQAAgAURAQAAWBARAACABREBAABYBCLCxub/AyPCr6PDIbJ+AAAAAElFTkSuQmCC"},67689:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-insert-trade-alpha-2-f7a7fdfa3697bb651deebe5b7fa12836.png"},20312:function(e,t,n){t.Z=n.p+"assets/images/test-console-eh-insert-trade-alpha-4eb900deeb8e489e4cd37092b719c5a4.png"},51435:function(e,t,n){t.Z=n.p+"assets/images/test-eh-check-insertion-alpha-3009ad08c4200b5c434335bb42722355.png"},90170:function(e,t,n){t.Z=n.p+"assets/images/test-eh-header-alpha-ad57041edc5daa42772a81e43941b074.png"},94007:function(e,t,n){t.Z=n.p+"assets/images/test-eh-insert-success-alpha-2f2f37b287ea15be08a42f7f771d07a9.png"},81003:function(e,t,n){t.Z=n.p+"assets/images/test-eh-url-body-alpha-87938bda997d92f1a370b86c4f881b02.png"},97547:function(e,t,n){t.Z=n.p+"assets/images/test-login-result-alpha-c4bfe81cf049aa0e9513d4f08ece2d0d.png"},72421:function(e,t,n){t.Z=n.p+"assets/images/using-dbmon-positions-d5c831a202da3f51e733a17182b03bdd.png"},46331:function(e,t,n){t.Z=n.p+"assets/images/using-mon-positions-ca0f139dd0bb5194a94f3de73853a933.png"}}]);