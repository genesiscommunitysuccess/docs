---
title: 'Data Pipelines - custom components'
sidebar_label: 'Custom components'
id: custom-components
keywords: [server, pipelines, custom]
tags:
  - server
  - pipelines
  - custom
---

## Persistence Manager

The persistence manager interface in the genesis-pipeline-api module enables you to decide how to track what you have last persisted.

If you use the default DbPersistenceManager implementation, you can directly inject the interface into your class.

### Database Persistence Manager

The DbPersistenceManager is an implementation of PersistenceManager that stores persistence records in the database as a record of the table mentioned below.

This class supports transactions and uses a transaction handle, if provided. Otherwise, it uses the injected instance of the entity database.

The latest index returned will always be the greatest value for the given source. The user is given the option whether or not to ‘append’ the record:

- if true, create a new persistence record
- if false, overwrite the current persistence record with the new index value

The table DATA_PIPELINE_PERSISTENCE contains the following fields:

- source: String = the source name for which we are storing the persistence information (needs to be unique per pipeline)
- index: Long = the index number which will allow us to retrieve the last persisted record

If no other implementation of `PersistenceManager` has been provided, this will be the default instance of `PersistenceManager`.

## StateManager

The state manager interface in the genesis-pipeline-api-module enables you to perform specific actions when setting the pipeline status to warn or healthy.

If you use the DefaultStateManager implementation, you can directly inject the interface into your class.

### Default State Manager

The DefaultStateManager is an implementation of StateManager that updates the state of the process running the pipeline to either WARNING or HEALTHY.

It has two methods that can be called:
- `warn(name: String, message: String)`
- `healthy(name: String, message: String)`

name = the name of the monitor to be updated
message = optional parameter to provide a custom message when updating to this state; if none is provided, a default message is used

If no other implementation of `StateManager` has been provided, this will be the default instance of `StateManager`.
