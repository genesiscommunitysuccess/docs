---
title: '8.3'
sidebar_label: '8.3'
sidebar_position: 17
id: '8.3'
---

:::tip
This release contains [breaking changes](#breaking-changes). These are listed at the end of this page.
:::

## Server

### Features

- Authorisation: add new method to provide "userName" property as part of entity field definitions for auth map consumers 
- (metrics): make logging of zero values optional in logger reporter
- Add "userHasRight" function to GPAL Dataserver, RequestReply and EventHandler 
- Add configurable timeout when waiting for dependent processes 
- Add gpal functions for data pipelines DbSink and update types 
- Add pipeline test for CSV Decoder 
- Added convenience function for building local file camel string 
- Added data pipeline manager as process bootstrap entry point + simple db source and log sink impls for testing 
- Added get all pipelines functions to PipelineManager 
- Added sendEventOnCompletion handler for Data Pipelines 
- Allow Dynamic rule PROCESS_NAME to be null and resolve resources by service discovery 
- CSV Decoder (Operator Implementation) 
- Expose additional system definition properties to run listeners directly on Netty threads and processing update queue updates in a single threaded fashion 
- Relax type requirements on SendEventOnCompletion handler functions and add db and log handles to pipelines script 
- Relax type requirements on SendEventOnCompletion handler functions and add entityDb to base pipelines script 
- Support paginated custom reqreps 
- Transactional DB sink should audit records 
- Add non-blocking threading model for database subscriptions 
- Add onCompletion handling to data pipelines v2 
- Add optional classloader and cpu metrics 
- Add optional pagination support to API code generation 
- Add support for Consolidators and ata pipelines in GenesisJunit 
- Added persistence api for data pipelines. 
- Added source implementation to batch poll the db. 
- Added source that uses camel to get files. 
- Allow remap to skip confirmation prompt based on sysdef 
- Allow specifying product name in settings plugin 
- Create DbSink class to implement Sink and StreamSink to add rows to db 
- Data pipelines v2 csv encoder 
- Enable sql database metrics 
- Enable update queue metrics 
- Extended DbBatchPoller to accept indexes with multiple fields. 
- Feat add metric for tracking the number of users per dataserver query 
- Pipelines v2 default imports 
- Simplified db batch poll gpal syntax. 
- Update genesis meta json schema with keyword and validation 

### Fixes

- getRangeFromEnd default method without fields parameter now calls correct getRangeFromEnd method 
- (deploy-plugin): find project jars from gradle jar task, not from version 
- Consolidator minus operation produces incorrect result when the first operand is null 
- Consul: improve session check logic used to determine primary process demotion to avoid race conditions 
- Criteria validation and compilation should handle StackOverflow errors 
- DOUBLE fields generated using the new table DSL to accept negative values by default 
- DbMon search returns the expected number of records 
- DbMon updateWhere fails if there is a white space in the argument 
- Ensure completion handlers are only invoked when an element is processed 
- Ensure completion handlers are only invoked when an element is processed 
- Ensure error messages are flushed to logs on process exit 
- Ensure gradle-api vulnerable dependencies are not added to the build due to the new openapi gradle plugin 
- Ensure that fields marked as non-nullable at the table level are also marked as such in the audit table 
- FDB alias cache will now respect fields with same name and different type defined in different tables 
- Fix "and" operator usage in generic GPAL "auth" blocks for eventhandler and custom req/rep 
- Fix Auth key concatenation for enriched auth clauses and AuthCache re-registration operation now uses correct record ids 
- Fix ClientConnectionsManager initialisation 
- Gradle preCompileScripts does not consider compacted processes 
- Map maxRows from router request to paginated request 
- Mon dies when system is not able to connect to CONSUL but is configured to do so 
- Refactor metric report type handling in tests and factory 
- Rename "authKeyWithUsername" to "authKeyWithUserName" for consistency 
- Update SetLogLevel to use data classes and workflow, re-add countdown latch to script 
- Add clientHandler router config with option to close client channel if becomes full 
- Allow db mon to fetch more than 500 results 
- Can use warningNack in context event handlers 
- db batch polling source should accept NANO_TIMESTAMP index 
- Ensure PrimaryRoleNodeRestorer handles persisted state properly 
- Ensure socket queues are ready before cluster init 
- Exclude data folder from site specific folder copy 
- Excluding unsupported pbcs from DEV compactProcessStrategy 
- Fix minor issues in GenesisJunit test framework 
- Fix ms sql insert handling 
- Fixed rx implementation constructor.
- Prevent remap using oracle to potentially rename constraints and indices in the recycle bin 
- Saving process static info in a blocking manner to ensure read integrity 
- Typo in compactProcesses in gradle properties 
- Updated db batch poll channel logic. 
- Uses io dispatcher and timeout while cleaning process metadata entries 

### Dependency changes

- Added constraint on jackson-dataformat-cbor to prevent classpath issues 
- Revert bump com.h2database:h2 from 2.2.224 to 2.3.230 in /genesis-conventions 
- Bump apachePoi from 5.2.5 to 5.3.0 in /genesis-conventions 
- Bump byteBuddyVersion from 1.14.17 to 1.14.18 in /genesis-conventions
- Bump byteBuddyVersion from 1.14.17 to 1.14.18 in /genesis-conventions 
- Bump camelVersion from 4.6.0 to 4.7.0 in /genesis-conventions 
- Bump com.github.oshi:oshi-core from 6.6.1 to 6.6.2 in /genesis-conventions 
- Bump com.github.spullara.mustache.java:compiler from 0.9.13 to 0.9.14 in /genesis-conventions 
- Bump com.google.errorprone:error_prone_annotations from 2.28.0 to 2.29.2 in /genesis-conventions - Bump com.google.protobuf:protobuf-java from 4.27.2 to 4.27.3 in /genesis-conventions 
- Bump com.h2database:h2 from 2.2.224 to 2.3.230 in /genesis-conventions 
- Bump com.h2database:h2 from 2.2.224 to 2.3.230 in /genesis-conventions 
- Bump com.jfrog.artifactory from 5.2.2 to 5.2.3 in /genesis-conventions 
- Bump com.jfrog.artifactory from 5.2.2 to 5.2.3 in /genesis-publish-config 
- Bump com.networknt:json-schema-validator from 1.4.3 to 1.5.0 in /genesis-conventions 
- Bump commons-codec:commons-codec from 1.17.0 to 1.17.1 in /genesis-parent/genesis-cluster
- Bump de.cronn:reflection-util from 2.15.0 to 2.16.0 in /genesis-subcore/genesis-db 
- Bump debeziumVersion from 2.6.2.Final to 2.7.0.Final in /genesis-conventions 
- Bump groovyVersion from 3.0.21 to 3.0.22 in /genesis-conventions 
- Bump it.unimi.dsi:fastutil from 8.1.0-min-genesis to 8.5.14 in /genesis-conventions 
- Bump jacksonVersion from 2.17.1 to 2.17.2 in /genesis-conventions 
- Bump junitVersion from 5.10.2 to 5.10.3 in /genesis-conventions
- Bump micrometerVersion from 1.13.1 to 1.13.2 in /genesis-conventions 
- Bump nettyVersion from 4.1.111.Final to 4.1.112.Final in /genesis-conventions 
- Bump org.apache.activemq:artemis-jakarta-client from 2.35.0 to 2.36.0 in /genesis-conventions 
- Bump org.apache.commons:commons-lang3 from 3.14.0 to 3.15.0 in /genesis-conventions 
- Bump org.apache.commons:commons-lang3 from 3.15.0 to 3.16.0 in /genesis-conventions 
- Bump org.apache.fury:fury-core from 0.5.1 to 0.6.0 in /genesis-conventions 
- Bump org.assertj:assertj-core from 3.26.0 to 3.26.3 in /genesis-conventions 
- Bump org.checkerframework:checker-qual from 3.44.0 to 3.45.0 in /genesis-conventions
- Bump org.checkerframework:checker-qual from 3.45.0 to 3.46.0 in /genesis-conventions 
- Bump org.gradle.test-retry from 1.5.9 to 1.5.10 in /genesis-conventions 
- Bump org.gradle:test-retry-gradle-plugin from 1.5.9 to 1.5.10 in /genesis-conventions 
- Bump org.java-websocket:Java-WebSocket from 1.5.6 to 1.5.7 in /genesis-conventions 
- Bump org.jfrog.buildinfo:build-info-extractor-gradle from 5.2.2 to 5.2.3 in /genesis-conventions 
- Bump org.jfrog.buildinfo:build-info-extractor-gradle from 5.2.2 to 5.2.3 in /genesis-publish-config 
- Bump org.jline:jline from 3.26.2 to 3.26.3 in /genesis-conventions 
- Bump org.mockito.kotlin:mockito-kotlin from 5.3.1 to 5.4.0 in /genesis-conventions 
- Bump org.openapitools:openapi-generator from 7.6.0 to 7.7.0 in /genesis-conventions 
- Bump software.amazon.jdbc:aws-advanced-jdbc-wrapper from 2.3.7 to 2.3.8 in /genesis-conventions 
- Bump testcontainersVersion from 1.19.8 to 1.20.0 in /genesis-conventions 
- Bump testcontainersVersion from 1.20.0 to 1.20.1 in /genesis-conventions 
- downgrading H2 to 2.2.224 due different behavior on GetRange operations and indices

### Patch releases

#### 8.3.2

- Include dependant scripts in codegen cache key (GSF-6895) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3305
- Table removal + table rename to the table name of the removed table now works as expected (GSF-7003) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3328
- ResourceDaemon: Fix Dependency Injection initialisation on startup (GSF-6999) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3312
- SysDefOverwrite test annotation overwrites specified properties with others retrieved from system definition files (GSF-6950) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3283
- Fail preCompileScripts gradle task by default and add option to disable failing on error (GSF-7019) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3367
- Remove explicit toString call on ClusterMessage debug line (GSF-7098) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3564
- Revert resolving sys def from genesis home in TestSystemDefinitionService (GSF-6950) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3291

#### 8.3.1
- Deploy zip task reference correct file when product name set in settings plugin (GSF-6988) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3259
- Dataserver backwardsJoin view does not recover in case of a buffered out of order update (GSF-6990) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3270
- When using @SysDefOverwrite annotation in tests and scripts use sys def receiver (GSF-6950) by @rafaelnferreira in https://github.com/genesislcap/genesis-server/pull/3258

## Client

### Features

* Adding label placement option 
* Allow crud buttons to be placed above the grid 
* Using color channels splitting raise intent
* ReqRep support when SSRM + new filters + complete overhaul
* Add playwright-bdd to foundation-testing + README update
* Default filter for combobox renderer
* Ability to add nav items in side-bar 

### Fixes

* Address error loop when used within foundation-layout 
* Updating @playwright/test to latest 
* Restore log level support on package loggers 
* Display toast on crud operations 
* Handle spacebar selection/deselection and update CRUD buttons
* Update server-side reqRep to match latest GSF
* Mock JSDOM dialog methods 
* Search-bar value/label mapping 
* Convert initial label to string 
* Include additionalErrors in main errors array in smart-forms 

## Noteworthy changes

### New injector for Google Guice
:::warning Applications using Google Guice
A new class has been created to address an issue following a bugfix introduced in 8.3.0, 8.2.5 and 8.1.9.
:::

If your application is injecting the Google Guice `com.google.inject.Injector` within the constructor, and no other classes belonging to the `<package>` definition in the **-processes.xml** file are injected alongside it, the Injector might not be able to provide the right dependencies. This causes runtime exceptions on process startup.

In order to fix this issue, inject the new `global.genesis.commons.guice.GenesisInjector` class instead of the Google Injector instance. This ensures the correct behaviour in every scenario.

```
/**
This will FAIL as the injector is the only thing being injected.
**/
@Module
class MyModule @Inject constructor(private val injector: Injector) {

}

/**
This will FAIL as the injector as only core classes are being injected alongside the injector
**/
@Module
class MyModule @Inject constructor(
    private val injector: Injector,
    private val entityDb: AsyncEntityDb
) {

}

/**
This will succeed as service classes are also being injected.

However, we recommend not injecting the injector at all, but if you absolutely must,
inject GenesisInjector instead, just in case somebody removes the contructor argument later.
**/
@Module
class MyModule @Inject constructor(
    private val injector: Injector,
    private val myClass: MyOtherClass
) {

}
```

## Breaking changes

- Ensure full service initialisation does not happen until a service is allowed to go up when in primary mode 
- Ensure dataserver doesn't go into error state when string index fields are truncated or when rows are ignored 
- Increasing object_key field size 


## Deprecations

The sample `auth`  DSL syntax approaches to define auth fields shown below are now deprecated and will be removed in a future release.

Implicit field lists, and `fields` in traditional dataservers and req/reps:

```kotlin

auth("COUNTERPARTY") {
  ~~COUNTERPARTY.COUNTERPARTY_ID~~
}

auth("COUNTERPARTY") {
  ~~**fields** {
    COUNTERPARTY_ID
  }~~
}

enrichedAuth("COUNTERPARTY", USER_COUNTERPARTY_DETAILS){
   ~~COUNTERPARTY.COUNTERPARTY_ID
   USER_COUNTERPARTY_DETAILS.USER_NAME~~
}

```

`field` and `fields` in custom req/reps, event handler, and web handlers:

```kotlin
eventHandler<Trade>(name = "TRADE_INSERT") {
  permissioning {
      auth("COUNTERPARTY"){
          ~~field {
            counterpartyId
          }~~
      }
  }
  ....
}

eventHandler<Trade>(name = "TRADE_INSERT") {
  permissioning {
      auth("COUNTERPARTY"){
          ~~fields {
            listOf(counterpartyId, accountId)
          }~~
      }
  }
  ....
}

endpoint(GET, "all-counterparty") {
    permissioning {
        requestAuth("COUNTERPARTY") {
            ~~field {
              counterpartyId
            }~~
        }
        responseAuth("COUNTERPARTY") {
            ~~fields {
              listOf(counterpartyId)
            }~~
        }
    }
    handleRequest {
        db.getBulk(COUNTERPARTY)
    }
}

requestReply<CounterpartyId, Counterparty>("COUNTERPARTY") {
    permissioning {
       ~~field {
          counterparty
       }~~
    }
}

requestReply<CounterpartyId, Counterparty>("COUNTERPARTY") {
    permissioning {
       ~~fields {
          listOf(counterparty)
       }~~
    }
}
```

The new syntax to be used is universal and consistent for all GPAL scripts. See sample below:

```kotlin
auth("COUNTERPARTY"){
  authKey {
     key(data.counterpartyId)
  }
}
```