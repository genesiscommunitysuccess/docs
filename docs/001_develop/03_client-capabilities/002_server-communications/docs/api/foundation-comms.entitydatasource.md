---
format: md
---
<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@genesislcap/foundation-comms](./foundation-comms.md) &gt; [EntityDatasource](./foundation-comms.entitydatasource.md)

## EntityDatasource interface

> This API is provided as an alpha preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

EntityDatasource DI interface.

**Signature:**

```typescript
export interface EntityDatasource<TDTO, TEntity> extends Datasource 
```
**Extends:** [Datasource](./foundation-comms.datasource.md)

## Remarks

A simple streaming datasource cache used mainly by services that employ DTO mappers.

## Example

An example service using an underlying EntityDatasource:

```ts
export class DefaultDomainService implements DomainService {
  constructor(
    @EntityDatasource protected datasource: EntityDatasource<DomainDTO, DomainEntity>,
    @DomainDTOMapper protected mapper: DomainDTOMapper,
    @optional(DomainServiceConfig) private config = defaultConfig
  ) {}

  get initialized = () {
    return this.datasource.initialized;
  }

  initialize = async (init) => {
    await this.datasource.initialize({
      mapper: this.mapper,
      options: {
        resourceName: this.config.resourceName,
        ...init,
      },
    });
    return this.initialized;
  };

  list = () => this.datasource.cache;

  get = async (id: string) => this.datasource.cache.find((entity) => entity.id === id);

  action = async (id: string, message?: string): Promise<Message> => {
    return this.commitEvent('EVENT_DOMAIN_ACTION', { id, message });
  };

  private async commitEvent(event: string, entity: Partial<DomainEntity>) {
    const msg = await this.connect.commitEvent(event, {
      DETAILS: this.mapper.toDTO(entity),
      IGNORE_WARNINGS: true,
      VALIDATE: false,
    });
    return messageOrThrow(msg);
  }
```

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[cache](./foundation-comms.entitydatasource.cache.md)


</td><td>

`readonly`


</td><td>

TEntity\[\]


</td><td>

**_(ALPHA)_**


</td></tr>
<tr><td>

[isEmpty](./foundation-comms.entitydatasource.isempty.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

**_(ALPHA)_**


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[disconnect()](./foundation-comms.entitydatasource.disconnect.md)


</td><td>

**_(ALPHA)_**


</td></tr>
<tr><td>

[initialize(init)](./foundation-comms.entitydatasource.initialize.md)


</td><td>

**_(ALPHA)_**


</td></tr>
</tbody></table>

